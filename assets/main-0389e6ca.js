var yn=Object.defineProperty;var Sn=(t,e,s)=>e in t?yn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Xt=(t,e,s)=>(Sn(t,typeof e!="symbol"?e+"":e,s),s);import{b as wn,r as y,j as a,L as Yt,C as Re,T as Ds,d as v,e as dt,I as vn,G as fe,B as Y,f as _s,h as te,i as ot,A as Xe,S as Ye,P as Ms,k as W,l as jn,m as vt,n as _e,o as Cn,N as G,u as An,q as Te,s as Tn,D as Pt,t as Nn,v as On,w as ut,x as et,y as Pn,z as _,E as ae,F as Pe,H as En,J as st,K as Qt,M as lt,O as Rn,Q as Ln,U as Un,V as In,W as kn,X as Dn,Y as _n,Z as ze,_ as Zt,$ as Mn,a0 as es,a1 as Bn,a2 as ue,a3 as zn,a4 as $n,a5 as Fn,a6 as Vn,a7 as Hn,a8 as Wn,a9 as Kn,aa as qn,ab as Jn,ac as Gn,ad as Xn,ae as ts,af as Yn,c as Je,a as Qn,ag as Zn,ah as er,R as tr,ai as sr}from"./ui-0616170e.js";import{_ as de,u as xt,a as bt,T as Et,i as nr,b as rr}from"./ton_tg-ec01041d.js";import{r as ir,d as O,c as ar}from"./ton_core-1d22c840.js";function or(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(n,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var Rt={},ss=wn;Rt.createRoot=ss.createRoot,Rt.hydrateRoot=ss.hydrateRoot;const lr="_inner_hgqr3_1",cr="_content_hgqr3_12",dr="_title_hgqr3_22",ur="_control_hgqr3_36",fr="_image_hgqr3_42",hr="_highlight_hgqr3_51",Ne={inner:lr,content:cr,title:dr,control:ur,image:fr,highlight:hr};function Bs(){const[t,e]=y.useState(!1);return y.useEffect(()=>{de.initDataUnsafe.user!==void 0&&e(!0)},[]),{webApp:de,isWebApp:t}}function pr(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];Ee(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const ns={};function Lt(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];Ee(e[0])&&ns[e[0]]||(Ee(e[0])&&(ns[e[0]]=new Date),pr(...e))}const zs=(t,e)=>()=>{if(t.isInitialized)e();else{const s=()=>{setTimeout(()=>{t.off("initialized",s)},0),e()};t.on("initialized",s)}},rs=(t,e,s)=>{t.loadNamespaces(e,zs(t,s))},is=(t,e,s,n)=>{Ee(s)&&(s=[s]),s.forEach(r=>{t.options.ns.indexOf(r)<0&&t.options.ns.push(r)}),t.loadLanguages(e,zs(t,n))},mr=function(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=e.languages[0],r=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const d=e.services.backendConnector.state[`${l}|${c}`];return d===-1||d===2};return s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(n,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(n,t)&&(!r||o(i,t)))},gr=function(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(Lt("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:s.lng,precheck:(r,i)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}):mr(t,e,s)},Ee=t=>typeof t=="string",xr=t=>typeof t=="object"&&t!==null,br=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,yr={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Sr=t=>yr[t],wr=t=>t.replace(br,Sr);let Ut={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:wr};const vr=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ut={...Ut,...t}},jr=()=>Ut;let $s;const Cr=t=>{$s=t},Ar=()=>$s,Tr={type:"3rdParty",init(t){vr(t.options.react),Cr(t)}},Nr=y.createContext();class Or{constructor(){Xt(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}}const Pr=(t,e)=>{const s=y.useRef();return y.useEffect(()=>{s.current=e?s.current:t},[t,e]),s.current},Fs=(t,e,s,n)=>t.getFixedT(e,s,n),Er=(t,e,s,n)=>y.useCallback(Fs(t,e,s,n),[t,e,s,n]),be=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:s}=e,{i18n:n,defaultNS:r}=y.useContext(Nr)||{},i=s||n||Ar();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new Or),!i){Lt("You will need to pass in an i18next instance by using initReactI18next");const T=(R,L)=>Ee(L)?L:xr(L)&&Ee(L.defaultValue)?L.defaultValue:Array.isArray(R)?R[R.length-1]:R,P=[T,{},!1];return P.t=T,P.i18n={},P.ready=!1,P}i.options.react&&i.options.react.wait!==void 0&&Lt("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...jr(),...i.options.react,...e},{useSuspense:l,keyPrefix:c}=o;let d=t||r||i.options&&i.options.defaultNS;d=Ee(d)?[d]:d||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(d);const u=(i.isInitialized||i.initializedStoreOnce)&&d.every(T=>gr(T,i,o)),p=Er(i,e.lng||null,o.nsMode==="fallback"?d:d[0],c),f=()=>p,x=()=>Fs(i,e.lng||null,o.nsMode==="fallback"?d:d[0],c),[S,g]=y.useState(f);let b=d.join();e.lng&&(b=`${e.lng}${b}`);const A=Pr(b),N=y.useRef(!0);y.useEffect(()=>{const{bindI18n:T,bindI18nStore:P}=o;N.current=!0,!u&&!l&&(e.lng?is(i,e.lng,d,()=>{N.current&&g(x)}):rs(i,d,()=>{N.current&&g(x)})),u&&A&&A!==b&&N.current&&g(x);const R=()=>{N.current&&g(x)};return T&&i&&i.on(T,R),P&&i&&i.store.on(P,R),()=>{N.current=!1,T&&i&&T.split(" ").forEach(L=>i.off(L,R)),P&&i&&P.split(" ").forEach(L=>i.store.off(L,R))}},[i,b]),y.useEffect(()=>{N.current&&u&&g(f)},[i,c,u]);const k=[S,i,u];if(k.t=S,k.i18n=i,k.ready=u,u||!u&&!l)return k;throw new Promise(T=>{e.lng?is(i,e.lng,d,()=>T()):rs(i,d,()=>T())})};function jt({data:t}){const[e]=xt(),{isWebApp:s}=Bs(),{t:n}=be(),r=[];for(let i=0;i<t.itemsCount;i++)r.push(a.jsxs(Yt.Item,{children:[a.jsx("b",{children:n(`custom:heroPage.items.${i}.main`)})," – ",n(`custom:heroPage.items.${i}.desc`)]},i));return a.jsx(Re,{size:"xl",children:a.jsxs("div",{className:Ne.inner,children:[a.jsxs("div",{className:Ne.content,children:[a.jsxs(Ds,{className:Ne.title,children:[n("custom:heroPage.title.first")," ",a.jsx("span",{className:Ne.highlight,children:n("custom:heroPage.title.second")})," ",n("custom:heroPage.title.third")]}),a.jsx(v,{c:"dimmed",mt:"md",children:n("heroPage.description",{ns:"custom"})}),a.jsx(Yt,{mt:30,spacing:"sm",size:"sm",icon:a.jsx(dt,{size:20,radius:"xl",children:a.jsx(vn,{size:12,stroke:1.5})}),children:r}),!s&&a.jsx(fe,{className:Ne.controls,children:a.jsx(Y,{mt:30,radius:"xl",size:"md",className:Ne.control,onClick:()=>e.openModal(),children:n("Connect Wallet")})})]}),a.jsx(_s,{src:t.image,className:Ne.image})]})})}const Rr="_card_1ag5c_1",Lr="_imageSection_1ag5c_6",Ur="_label_1ag5c_14",Ir="_section_1ag5c_23",kr="_buttonSection_1ag5c_28",Dr="_inputWrapper_1ag5c_34",_r="_loader_1ag5c_39",Ht={card:Rr,imageSection:Lr,label:Ur,section:Ir,buttonSection:kr,inputWrapper:Dr,loader:_r};function Vs({data:t}){const{t:e}=be(),s=[];for(let n=0;n<t.length;n++){const r=t[n];s.push(a.jsxs(te,{withBorder:!0,children:[a.jsxs(te.Section,{p:"xs",children:[a.jsx(ot,{children:a.jsx(Xe,{variant:"filled",radius:"xl",src:r.logo,size:"xl"})}),a.jsx(ot,{children:a.jsx(v,{fw:500,ml:"2px",truncate:"end",children:r.name})})]}),a.jsxs(v,{size:"xs",children:[" ",e("Loan"),": ",r.size," ",r.usdt?"USDT":"TON"]}),a.jsxs(v,{size:"xs",children:[" ",e("Per day"),": ",r.interest," %"]}),a.jsxs(v,{size:"xs",children:[" ",e("Term"),": ",r.duration," ",e("days")]})]},n))}return a.jsxs(Re,{size:"xl",p:"xs",m:"xs",children:[a.jsx(ot,{children:a.jsx(Ds,{order:3,children:e("Available collections")})}),a.jsx(Ye,{cols:{base:2,md:3,lg:4},spacing:"xs",mt:"md",children:s})]})}var Mr=ir();const $e=86400,Br=1e4,Ce=1e9,le=1e6,We=.1,Ke=.4,It=.05,zr=["0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2","0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2","0:46fa0e9a864014196a5e7d66f1f83ffdb10f2859bbf2ea9baeabbf14d9ce0d50","0:fd8a466aeb13e02a3ce67411b41b44bcd11bd42636f0807acf6570ca73fc2c13","0:ab180f6c942a24b200fe3724438ed1f248a3744ecf24ea176e78991491965d0f","0:13b9419dbeb8cbbd3584e69a5514e542a94d9d9422d49ca4ecbb49f52589bd95","0:388b9f22b92f4351846d519f7bb19a399a791b898501a565d039eddd11409c3f","0:fa987f5bc1b9fa4b733fb424563afa80216f0cdf8911c1b234d678862d13de0c","0:02710a51d9f99d784356744d98190587571493c80f19ab8fe4eeb93f21ac4245","0:c9b0df4e24184a199a16656b64129ce409f22ed7a67d5334d66d88de2e9b8775","0:30cee6dea09c27aa6981b933e99d44aead1cd63c1f0447371fcf1e7967662313","0:70dad3b951a27873f617b7723ccb9283d24dfbb2d699c5e755d8ee479abca22b","0:d3ae8fa88096d2ee8f8e043e9bb76372b0fb7b4a71a6e737ee457181d6713fad","0:9e7eb8e1083dbfec7448af6966c2df596aa786fed76c781bc00c2ebaf37de405","0:ee9b2ddb9d96335786d258c492664997ab1e745ee1f977d4655ffc848b614d96","0:d0e838d169b4d8480c5fdb1ad9b27b17b6a7089b56e3f5d179c7f87c94d8d63e","0:7a02d04f3ae4ed42697ca1203b5fc66a27942670e618aa8cfddac4185c6510af","0:b200c91be9b37236528f1f4b496ee6e4d55563012ab2abdb19c2427c01bc4c93","0:5a38bf261f9632c245e3929b3ae57d4e2cf347ee99ece1871f2e6695a456a834","0:2d154f46ac67e2c78506f433a2bcde7c431be004951a019fe97590590a66e12a","0:1a4c847ba09ca8c038ae9982d5374a1eeb590613723a10f127ed68073c6b9601","0:3c0c25b2096cb2c2038a60e45ead1a1255ebd6ad443f16329080d8a1c58d76db","0:78c77b13d4355d383cdacb71fee1524874ea284b9fa44e0c8a7183195a880f3a"],$r=function(t,e,s){if(t.length<=e)return t;s=s||"...";var n=s.length,r=e-n,i=Math.ceil(r/2),o=Math.floor(r/2);return t.substring(0,i)+s+t.substring(t.length-o)},Fr=function(t){return t?$r(t,18,"..."):""},Hs=async function(t,e){const s=t.nft,n=t.props.usdt===!0?e*le:O.toNano(e);if(t.props.custom===!0)return O.beginCell().storeCoins(n).endCell();const r=zr.indexOf(s.collectionAddress);if(r>-1){let i;r<2?i=s.name.slice(1).replace(/ /g,""):i=s.name.replace(/#/g,"-").replace(/[ ’]/g,"").toLowerCase(),console.log("[getForwardPayload] teleitem name: ",i);const l=(await Mr.sha256(i)).toString("hex"),c=BigInt(`0x${l}`),d=O.beginCell().storeUint(c,256).endCell();return O.beginCell().storeCoins(n).storeRef(d).endCell()}else return O.beginCell().storeUint(BigInt(s.tokenId),64).storeCoins(n).endCell()},Vr=async function(t){const e=[],s=[],n=[];for(let r=0;r<t.length;r++){const i=t[r];e.push(i.nft.address),s.push(i.props.verifier),n.push(await Hs(i,i.props.size))}return{nftAddresses:e,vItemAddresses:s,forwardPayloads:n}},X={ERROR:0,ACTIVE:1,CREDIT_CLOSED:2,WAIT_START_BID:3,AUCTION_STARTED:4,AUCTION_FINISHED:5},we={GET_CREDIT:0,MAKE_BET:1},U=t=>typeof t=="string",Fe=()=>{let t,e;const s=new Promise((n,r)=>{t=n,e=r});return s.resolve=t,s.reject=e,s},as=t=>t==null?"":""+t,Hr=(t,e,s)=>{t.forEach(n=>{e[n]&&(s[n]=e[n])})},Wr=/###/g,os=t=>t&&t.indexOf("###")>-1?t.replace(Wr,"."):t,ls=t=>!t||U(t),Ge=(t,e,s)=>{const n=U(e)?e.split("."):e;let r=0;for(;r<n.length-1;){if(ls(t))return{};const i=os(n[r]);!t[i]&&s&&(t[i]=new s),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++r}return ls(t)?{}:{obj:t,k:os(n[r])}},cs=(t,e,s)=>{const{obj:n,k:r}=Ge(t,e,Object);if(n!==void 0||e.length===1){n[r]=s;return}let i=e[e.length-1],o=e.slice(0,e.length-1),l=Ge(t,o,Object);for(;l.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),l=Ge(t,o,Object),l&&l.obj&&typeof l.obj[`${l.k}.${i}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${i}`]=s},Kr=(t,e,s,n)=>{const{obj:r,k:i}=Ge(t,e,Object);r[i]=r[i]||[],r[i].push(s)},ft=(t,e)=>{const{obj:s,k:n}=Ge(t,e);if(s)return s[n]},qr=(t,e,s)=>{const n=ft(t,s);return n!==void 0?n:ft(e,s)},Ws=(t,e,s)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?U(t[n])||t[n]instanceof String||U(e[n])||e[n]instanceof String?s&&(t[n]=e[n]):Ws(t[n],e[n],s):t[n]=e[n]);return t},Ue=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Jr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Gr=t=>U(t)?t.replace(/[&<>"'\/]/g,e=>Jr[e]):t;class Xr{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const s=this.regExpMap.get(e);if(s!==void 0)return s;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Yr=[" ",",","?","!",";"],Qr=new Xr(20),Zr=(t,e,s)=>{e=e||"",s=s||"";const n=Yr.filter(o=>e.indexOf(o)<0&&s.indexOf(o)<0);if(n.length===0)return!0;const r=Qr.getRegExp(`(${n.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!r.test(t);if(!i){const o=t.indexOf(s);o>0&&!r.test(t.substring(0,o))&&(i=!0)}return i},kt=function(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const n=e.split(s);let r=t;for(let i=0;i<n.length;){if(!r||typeof r!="object")return;let o,l="";for(let c=i;c<n.length;++c)if(c!==i&&(l+=s),l+=n[c],o=r[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<n.length-1)continue;i+=c-i+1;break}r=o}return r},ht=t=>t&&t.replace("_","-"),ei={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class pt{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,s)}init(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=s.prefix||"i18next:",this.logger=e||ei,this.options=s,this.debug=s.debug}log(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return this.forward(s,"log","",!0)}warn(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return this.forward(s,"warn","",!0)}error(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return this.forward(s,"error","")}deprecate(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(e,s,n,r){return r&&!this.debug?null:(U(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[s](e))}create(e){return new pt(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new pt(this.logger,e)}}var xe=new pt;class yt{constructor(){this.observers={}}on(e,s){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const r=this.observers[n].get(s)||0;this.observers[n].set(s,r+1)}),this}off(e,s){if(this.observers[e]){if(!s){delete this.observers[e];return}this.observers[e].delete(s)}}emit(e){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[l,c]=o;for(let d=0;d<c;d++)l(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[l,c]=o;for(let d=0;d<c;d++)l.apply(l,[e,...n])})}}class ds extends yt{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const s=this.options.ns.indexOf(e);s>-1&&this.options.ns.splice(s,1)}getResource(e,s,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,o=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,s],n&&(Array.isArray(n)?l.push(...n):U(n)&&i?l.push(...n.split(i)):l.push(n)));const c=ft(this.data,l);return!c&&!s&&!n&&e.indexOf(".")>-1&&(e=l[0],s=l[1],n=l.slice(2).join(".")),c||!o||!U(n)?c:kt(this.data&&this.data[e]&&this.data[e][s],n,i)}addResource(e,s,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let l=[e,s];n&&(l=l.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(l=e.split("."),r=s,s=l[1]),this.addNamespaces(s),cs(this.data,l,r),i.silent||this.emit("added",e,s,n,r)}addResources(e,s,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in n)(U(n[i])||Array.isArray(n[i]))&&this.addResource(e,s,i,n[i],{silent:!0});r.silent||this.emit("added",e,s,n)}addResourceBundle(e,s,n,r,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[e,s];e.indexOf(".")>-1&&(l=e.split("."),r=n,n=s,s=l[1]),this.addNamespaces(s);let c=ft(this.data,l)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?Ws(c,n,i):c={...c,...n},cs(this.data,l,c),o.silent||this.emit("added",e,s,n)}removeResourceBundle(e,s){this.hasResourceBundle(e,s)&&delete this.data[e][s],this.removeNamespaces(s),this.emit("removed",e,s)}hasResourceBundle(e,s){return this.getResource(e,s)!==void 0}getResourceBundle(e,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,s)}:this.getResource(e,s)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const s=this.getDataByLanguage(e);return!!(s&&Object.keys(s)||[]).find(r=>s[r]&&Object.keys(s[r]).length>0)}toJSON(){return this.data}}var Ks={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,s,n,r){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,s,n,r))}),e}};const us={};class mt extends yt{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Hr(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=xe.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,s);return n&&n.res!==void 0}extractFromKey(e,s){let n=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const r=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let i=s.ns||this.options.defaultNS||[];const o=n&&e.indexOf(n)>-1,l=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!Zr(e,n,r);if(o&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:U(i)?[i]:i};const d=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(d[0])>-1)&&(i=d.shift()),e=d.join(r)}return{key:e,namespaces:U(i)?[i]:i}}translate(e,s,n){if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const r=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(e[e.length-1],s),c=l[l.length-1],d=s.lng||this.language,u=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&d.toLowerCase()==="cimode"){if(u){const T=s.nsSeparator||this.options.nsSeparator;return r?{res:`${c}${T}${o}`,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(s)}:`${c}${T}${o}`}return r?{res:o,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(s)}:o}const p=this.resolve(e,s);let f=p&&p.res;const x=p&&p.usedKey||o,S=p&&p.exactUsedKey||o,g=Object.prototype.toString.apply(f),b=["[object Number]","[object Function]","[object RegExp]"],A=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,N=!this.i18nFormat||this.i18nFormat.handleAsObject,k=!U(f)&&typeof f!="boolean"&&typeof f!="number";if(N&&f&&k&&b.indexOf(g)<0&&!(U(A)&&Array.isArray(f))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const T=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,f,{...s,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return r?(p.res=T,p.usedParams=this.getUsedParamsDetails(s),p):T}if(i){const T=Array.isArray(f),P=T?[]:{},R=T?S:x;for(const L in f)if(Object.prototype.hasOwnProperty.call(f,L)){const Q=`${R}${i}${L}`;P[L]=this.translate(Q,{...s,joinArrays:!1,ns:l}),P[L]===Q&&(P[L]=f[L])}f=P}}else if(N&&U(A)&&Array.isArray(f))f=f.join(A),f&&(f=this.extendTranslation(f,e,s,n));else{let T=!1,P=!1;const R=s.count!==void 0&&!U(s.count),L=mt.hasDefaultValue(s),Q=R?this.pluralResolver.getSuffix(d,s.count,s):"",M=s.ordinal&&R?this.pluralResolver.getSuffix(d,s.count,{ordinal:!1}):"",z=R&&!s.ordinal&&s.count===0&&this.pluralResolver.shouldUseIntlApi(),F=z&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${Q}`]||s[`defaultValue${M}`]||s.defaultValue;!this.isValidLookup(f)&&L&&(T=!0,f=F),this.isValidLookup(f)||(P=!0,f=o);const J=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&P?void 0:f,se=L&&F!==f&&this.options.updateMissing;if(P||T||se){if(this.logger.log(se?"updateKey":"missingKey",d,c,o,se?F:f),i){const j=this.resolve(o,{...s,keySeparator:!1});j&&j.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let h=[];const m=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&m&&m[0])for(let j=0;j<m.length;j++)h.push(m[j]);else this.options.saveMissingTo==="all"?h=this.languageUtils.toResolveHierarchy(s.lng||this.language):h.push(s.lng||this.language);const C=(j,E,w)=>{const B=L&&w!==f?w:J;this.options.missingKeyHandler?this.options.missingKeyHandler(j,c,E,B,se,s):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(j,c,E,B,se,s),this.emit("missingKey",j,c,E,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?h.forEach(j=>{const E=this.pluralResolver.getSuffixes(j,s);z&&s[`defaultValue${this.options.pluralSeparator}zero`]&&E.indexOf(`${this.options.pluralSeparator}zero`)<0&&E.push(`${this.options.pluralSeparator}zero`),E.forEach(w=>{C([j],o+w,s[`defaultValue${w}`]||F)})}):C(h,o,F))}f=this.extendTranslation(f,e,s,p,n),P&&f===o&&this.options.appendNamespaceToMissingKey&&(f=`${c}:${o}`),(P||T)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${o}`:o,T?f:void 0):f=this.options.parseMissingKeyHandler(f))}return r?(p.res=f,p.usedParams=this.getUsedParamsDetails(s),p):f}extendTranslation(e,s,n,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=U(e)&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(d){const f=e.match(this.interpolator.nestingRegexp);u=f&&f.length}let p=n.replace&&!U(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,n.lng||this.language||r.usedLng,n),d){const f=e.match(this.interpolator.nestingRegexp),x=f&&f.length;u<x&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&r&&r.res&&(n.lng=this.language||r.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var f=arguments.length,x=new Array(f),S=0;S<f;S++)x[S]=arguments[S];return i&&i[0]===x[0]&&!n.context?(o.logger.warn(`It seems you are nesting recursively key: ${x[0]} in key: ${s[0]}`),null):o.translate(...x,s)},n)),n.interpolation&&this.interpolator.reset()}const l=n.postProcess||this.options.postProcess,c=U(l)?[l]:l;return e!=null&&c&&c.length&&n.applyPostProcessor!==!1&&(e=Ks.handle(c,e,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,r,i,o,l;return U(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(n))return;const d=this.extractFromKey(c,s),u=d.key;r=u;let p=d.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const f=s.count!==void 0&&!U(s.count),x=f&&!s.ordinal&&s.count===0&&this.pluralResolver.shouldUseIntlApi(),S=s.context!==void 0&&(U(s.context)||typeof s.context=="number")&&s.context!=="",g=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);p.forEach(b=>{this.isValidLookup(n)||(l=b,!us[`${g[0]}-${b}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(l)&&(us[`${g[0]}-${b}`]=!0,this.logger.warn(`key "${r}" for languages "${g.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(A=>{if(this.isValidLookup(n))return;o=A;const N=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(N,u,A,b,s);else{let T;f&&(T=this.pluralResolver.getSuffix(A,s.count,s));const P=`${this.options.pluralSeparator}zero`,R=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(N.push(u+T),s.ordinal&&T.indexOf(R)===0&&N.push(u+T.replace(R,this.options.pluralSeparator)),x&&N.push(u+P)),S){const L=`${u}${this.options.contextSeparator}${s.context}`;N.push(L),f&&(N.push(L+T),s.ordinal&&T.indexOf(R)===0&&N.push(L+T.replace(R,this.options.pluralSeparator)),x&&N.push(L+P))}}let k;for(;k=N.pop();)this.isValidLookup(n)||(i=k,n=this.getResource(A,b,k,s))}))})}),{res:n,usedKey:r,exactUsedKey:i,usedLng:o,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,s,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,s,n,r):this.resourceStore.getResource(e,s,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!U(e.replace);let r=n?e.replace:e;if(n&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const i of s)delete r[i]}return r}static hasDefaultValue(e){const s="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&s===n.substring(0,s.length)&&e[n]!==void 0)return!0;return!1}}const Ct=t=>t.charAt(0).toUpperCase()+t.slice(1);class fs{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=xe.create("languageUtils")}getScriptPartFromCode(e){if(e=ht(e),!e||e.indexOf("-")<0)return null;const s=e.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(e){if(e=ht(e),!e||e.indexOf("-")<0)return e;const s=e.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(e){if(U(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let r=Intl.getCanonicalLocales(e)[0];if(r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r)return r}catch{}const s=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map(r=>r.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),s.indexOf(n[1].toLowerCase())>-1&&(n[1]=Ct(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),s.indexOf(n[1].toLowerCase())>-1&&(n[1]=Ct(n[1].toLowerCase())),s.indexOf(n[2].toLowerCase())>-1&&(n[2]=Ct(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let s;return e.forEach(n=>{if(s)return;const r=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(r))&&(s=r)}),!s&&this.options.supportedLngs&&e.forEach(n=>{if(s)return;const r=this.getLanguagePartFromCode(n);if(this.isSupportedCode(r))return s=r;s=this.options.supportedLngs.find(i=>{if(i===r)return i;if(!(i.indexOf("-")<0&&r.indexOf("-")<0)&&(i.indexOf("-")>0&&r.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===r||i.indexOf(r)===0&&r.length>1))return i})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(e,s){if(!e)return[];if(typeof e=="function"&&(e=e(s)),U(e)&&(e=[e]),Array.isArray(e))return e;if(!s)return e.default||[];let n=e[s];return n||(n=e[this.getScriptPartFromCode(s)]),n||(n=e[this.formatLanguageCode(s)]),n||(n=e[this.getLanguagePartFromCode(s)]),n||(n=e.default),n||[]}toResolveHierarchy(e,s){const n=this.getFallbackCodes(s||this.options.fallbackLng||[],e),r=[],i=o=>{o&&(this.isSupportedCode(o)?r.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return U(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):U(e)&&i(this.formatLanguageCode(e)),n.forEach(o=>{r.indexOf(o)<0&&i(this.formatLanguageCode(o))}),r}}let ti=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],si={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const ni=["v1","v2","v3"],ri=["v4"],hs={zero:0,one:1,two:2,few:3,many:4,other:5},ii=()=>{const t={};return ti.forEach(e=>{e.lngs.forEach(s=>{t[s]={numbers:e.nr,plurals:si[e.fc]}})}),t};class ai{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=s,this.logger=xe.create("pluralResolver"),(!this.options.compatibilityJSON||ri.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=ii(),this.pluralRulesCache={}}addRule(e,s){this.rules[e]=s}clearCache(){this.pluralRulesCache={}}getRule(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const n=ht(e==="dev"?"en":e),r=s.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(n,{type:r})}catch{if(!e.match(/-|_/))return;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,s)}return this.pluralRulesCache[i]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,s);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(r=>`${s}${r}`)}getSuffixes(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,s);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((r,i)=>hs[r]-hs[i]).map(r=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${r}`):n.numbers.map(r=>this.getSuffix(e,r,s)):[]}getSuffix(e,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(s)}`:this.getSuffixRetroCompatible(r,s):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,s){const n=e.noAbs?e.plurals(s):e.plurals(Math.abs(s));let r=e.numbers[n];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(r===2?r="plural":r===1&&(r=""));const i=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return this.options.compatibilityJSON==="v1"?r===1?"":typeof r=="number"?`_plural_${r.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!ni.includes(this.options.compatibilityJSON)}}const ps=function(t,e,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=qr(t,e,s);return!i&&r&&U(s)&&(i=kt(t,s,n),i===void 0&&(i=kt(e,s,n))),i},At=t=>t.replace(/\$/g,"$$$$");class oi{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=xe.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(s=>s),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:s,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:o,suffix:l,suffixEscaped:c,formatSeparator:d,unescapeSuffix:u,unescapePrefix:p,nestingPrefix:f,nestingPrefixEscaped:x,nestingSuffix:S,nestingSuffixEscaped:g,nestingOptionsSeparator:b,maxReplaces:A,alwaysFormat:N}=e.interpolation;this.escape=s!==void 0?s:Gr,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=i?Ue(i):o||"{{",this.suffix=l?Ue(l):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=u?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=f?Ue(f):x||Ue("$t("),this.nestingSuffix=S?Ue(S):g||Ue(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=A||1e3,this.alwaysFormat=N!==void 0?N:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(s,n)=>s&&s.source===n?(s.lastIndex=0,s):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,s,n,r){let i,o,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=x=>{if(x.indexOf(this.formatSeparator)<0){const A=ps(s,c,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(A,void 0,n,{...r,...s,interpolationkey:x}):A}const S=x.split(this.formatSeparator),g=S.shift().trim(),b=S.join(this.formatSeparator).trim();return this.format(ps(s,c,g,this.options.keySeparator,this.options.ignoreJSONStructure),b,n,{...r,...s,interpolationkey:g})};this.resetRegExp();const u=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,p=r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>At(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?At(this.escape(x)):At(x)}].forEach(x=>{for(l=0;i=x.regex.exec(e);){const S=i[1].trim();if(o=d(S),o===void 0)if(typeof u=="function"){const b=u(e,i,r);o=U(b)?b:""}else if(r&&Object.prototype.hasOwnProperty.call(r,S))o="";else if(p){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${S} for interpolating ${e}`),o="";else!U(o)&&!this.useRawValueToEscape&&(o=as(o));const g=x.safeValue(o);if(e=e.replace(i[0],g),p?(x.regex.lastIndex+=o.length,x.regex.lastIndex-=i[0].length):x.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,i,o;const l=(c,d)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const p=c.split(new RegExp(`${u}[ ]*{`));let f=`{${p[1]}`;c=p[0],f=this.interpolate(f,o);const x=f.match(/'/g),S=f.match(/"/g);(x&&x.length%2===0&&!S||S.length%2!==0)&&(f=f.replace(/'/g,'"'));try{o=JSON.parse(f),d&&(o={...d,...o})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,g),`${c}${u}${f}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;r=this.nestingRegexp.exec(e);){let c=[];o={...n},o=o.replace&&!U(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let d=!1;if(r[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(r[1])){const u=r[1].split(this.formatSeparator).map(p=>p.trim());r[1]=u.shift(),c=u,d=!0}if(i=s(l.call(this,r[1].trim(),o),o),i&&r[0]===e&&!U(i))return i;U(i)||(i=as(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),i=""),d&&(i=c.reduce((u,p)=>this.format(u,p,n.lng,{...n,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}}const li=t=>{let e=t.toLowerCase().trim();const s={};if(t.indexOf("(")>-1){const n=t.split("(");e=n[0].toLowerCase().trim();const r=n[1].substring(0,n[1].length-1);e==="currency"&&r.indexOf(":")<0?s.currency||(s.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?s.range||(s.range=r.trim()):r.split(";").forEach(o=>{if(o){const[l,...c]=o.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),u=l.trim();s[u]||(s[u]=d),d==="false"&&(s[u]=!1),d==="true"&&(s[u]=!0),isNaN(d)||(s[u]=parseInt(d,10))}})}return{formatName:e,formatOptions:s}},Ie=t=>{const e={};return(s,n,r)=>{let i=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(i={...i,[r.interpolationkey]:void 0});const o=n+JSON.stringify(i);let l=e[o];return l||(l=t(ht(n),r),e[o]=l),l(s)}};class ci{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=xe.create("formatter"),this.options=e,this.formats={number:Ie((s,n)=>{const r=new Intl.NumberFormat(s,{...n});return i=>r.format(i)}),currency:Ie((s,n)=>{const r=new Intl.NumberFormat(s,{...n,style:"currency"});return i=>r.format(i)}),datetime:Ie((s,n)=>{const r=new Intl.DateTimeFormat(s,{...n});return i=>r.format(i)}),relativetime:Ie((s,n)=>{const r=new Intl.RelativeTimeFormat(s,{...n});return i=>r.format(i,n.range||"day")}),list:Ie((s,n)=>{const r=new Intl.ListFormat(s,{...n});return i=>r.format(i)})},this.init(e)}init(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=s.interpolation.formatSeparator||","}add(e,s){this.formats[e.toLowerCase().trim()]=s}addCached(e,s){this.formats[e.toLowerCase().trim()]=Ie(s)}format(e,s,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(l=>l.indexOf(")")>-1)){const l=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,l)].join(this.formatSeparator)}return i.reduce((l,c)=>{const{formatName:d,formatOptions:u}=li(c);if(this.formats[d]){let p=l;try{const f=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},x=f.locale||f.lng||r.locale||r.lng||n;p=this.formats[d](l,x,{...u,...r,...f})}catch(f){this.logger.warn(f)}return p}else this.logger.warn(`there was no format function for ${d}`);return l},e)}}const di=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class ui extends yt{constructor(e,s,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=s,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=xe.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(e,s,n,r){const i={},o={},l={},c={};return e.forEach(d=>{let u=!0;s.forEach(p=>{const f=`${d}|${p}`;!n.reload&&this.store.hasResourceBundle(d,p)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?o[f]===void 0&&(o[f]=!0):(this.state[f]=1,u=!1,o[f]===void 0&&(o[f]=!0),i[f]===void 0&&(i[f]=!0),c[p]===void 0&&(c[p]=!0)))}),u||(l[d]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,s,n){const r=e.split("|"),i=r[0],o=r[1];s&&this.emit("failedLoading",i,o,s),!s&&n&&this.store.addResourceBundle(i,o,n,void 0,void 0,{skipCopy:!0}),this.state[e]=s?-1:2,s&&n&&(this.state[e]=0);const l={};this.queue.forEach(c=>{Kr(c.loaded,[i],o),di(c,e),s&&c.errors.push(s),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{l[d]||(l[d]={});const u=c.loaded[d];u.length&&u.forEach(p=>{l[d][p]===void 0&&(l[d][p]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,s,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:s,fcName:n,tried:r,wait:i,callback:o});return}this.readingCalls++;const l=(d,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(d&&u&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,s,n,r+1,i*2,o)},i);return}o(d,u)},c=this.backend[n].bind(this.backend);if(c.length===2){try{const d=c(e,s);d&&typeof d.then=="function"?d.then(u=>l(null,u)).catch(l):l(null,d)}catch(d){l(d)}return}return c(e,s,l)}prepareLoading(e,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();U(e)&&(e=this.languageUtils.toResolveHierarchy(e)),U(s)&&(s=[s]);const i=this.queueLoad(e,s,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,s,n){this.prepareLoading(e,s,{},n)}reload(e,s,n){this.prepareLoading(e,s,{reload:!0},n)}loadOne(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${s}loading namespace ${i} for language ${r} failed`,o),!o&&l&&this.logger.log(`${s}loaded namespace ${i} for language ${r}`,l),this.loaded(e,o,l)})}saveMissing(e,s,n,r,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn(`did not save key "${n}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){const c={...o,isUpdate:i},d=this.backend.create.bind(this.backend);if(d.length<6)try{let u;d.length===5?u=d(e,s,n,r,c):u=d(e,s,n,r),u&&typeof u.then=="function"?u.then(p=>l(null,p)).catch(l):l(null,u)}catch(u){l(u)}else d(e,s,n,r,l,c)}!e||!e[0]||this.store.addResource(e[0],s,n,r)}}}const ms=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),U(t[1])&&(e.defaultValue=t[1]),U(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const s=t[3]||t[2];Object.keys(s).forEach(n=>{e[n]=s[n]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),gs=t=>(U(t.ns)&&(t.ns=[t.ns]),U(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),U(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),nt=()=>{},fi=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(s=>{typeof t[s]=="function"&&(t[s]=t[s].bind(t))})};class Qe extends yt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(super(),this.options=gs(e),this.services={},this.logger=xe,this.modules={external:[]},fi(this),s&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,s),this;setTimeout(()=>{this.init(e,s)},0)}}init(){var e=this;let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof s=="function"&&(n=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(U(s.ns)?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const r=ms();this.options={...r,...this.options,...gs(s)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);const i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?xe.init(i(this.modules.logger),this.options):xe.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=ci);const p=new fs(this.options);this.store=new ds(this.options.resources,this.options);const f=this.services;f.logger=xe,f.resourceStore=this.store,f.languageUtils=p,f.pluralResolver=new ai(p,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(f.formatter=i(u),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new oi(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new ui(i(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(x){for(var S=arguments.length,g=new Array(S>1?S-1:0),b=1;b<S;b++)g[b-1]=arguments[b];e.emit(x,...g)}),this.modules.languageDetector&&(f.languageDetector=i(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=i(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new mt(this.services,this.options),this.translator.on("*",function(x){for(var S=arguments.length,g=new Array(S>1?S-1:0),b=1;b<S;b++)g[b-1]=arguments[b];e.emit(x,...g)}),this.modules.external.forEach(x=>{x.init&&x.init(this)})}if(this.format=this.options.interpolation.format,n||(n=nt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const c=Fe(),d=()=>{const u=(p,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(f),n(p,f)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),c}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nt;const r=U(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const i=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(d=>{d!=="cimode"&&i.indexOf(d)<0&&i.push(d)})};r?o(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload&&this.options.preload.forEach(l=>o(l)),this.services.backendConnector.load(i,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(l)})}else n(null)}reloadResources(e,s,n){const r=Fe();return typeof e=="function"&&(n=e,e=void 0),typeof s=="function"&&(n=s,s=void 0),e||(e=this.languages),s||(s=this.options.ns),n||(n=nt),this.services.backendConnector.reload(e,s,i=>{r.resolve(),n(i)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Ks.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let s=0;s<this.languages.length;s++){const n=this.languages[s];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,s){var n=this;this.isLanguageChangingTo=e;const r=Fe();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,d)=>{d?(i(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,r.resolve(function(){return n.t(...arguments)}),s&&s(c,function(){return n.t(...arguments)})},l=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const d=U(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(d)),this.loadResources(d,u=>{o(u,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),r}getFixedT(e,s,n){var r=this;const i=function(o,l){let c;if(typeof l!="object"){for(var d=arguments.length,u=new Array(d>2?d-2:0),p=2;p<d;p++)u[p-2]=arguments[p];c=r.options.overloadTranslationOptionHandler([o,l].concat(u))}else c={...l};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||n||i.keyPrefix);const f=r.options.keySeparator||".";let x;return c.keyPrefix&&Array.isArray(o)?x=o.map(S=>`${c.keyPrefix}${f}${S}`):x=c.keyPrefix?`${c.keyPrefix}${f}${o}`:o,r.t(x,c)};return U(e)?i.lng=e:i.lngs=e,i.ns=s,i.keyPrefix=n,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=s.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const d=this.services.backendConnector.state[`${l}|${c}`];return d===-1||d===0||d===2};if(s.precheck){const l=s.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(n,e)&&(!r||o(i,e)))}loadNamespaces(e,s){const n=Fe();return this.options.ns?(U(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{n.resolve(),s&&s(r)}),n):(s&&s(),Promise.resolve())}loadLanguages(e,s){const n=Fe();U(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter(o=>r.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=r.concat(i),this.loadResources(o=>{n.resolve(),s&&s(o)}),n):(s&&s(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new fs(ms());return s.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;return new Qe(e,s)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nt;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new Qe(r);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(l=>{i[l]=this[l]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new ds(this.store.data,r),i.services.resourceStore=i.store),i.translator=new mt(i.services,r),i.translator.on("*",function(l){for(var c=arguments.length,d=new Array(c>1?c-1:0),u=1;u<c;u++)d[u-1]=arguments[u];i.emit(l,...d)}),i.init(r,s),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const re=Qe.createInstance();re.createInstance=Qe.createInstance;re.createInstance;re.dir;re.init;re.loadResources;re.reloadResources;re.use;re.changeLanguage;re.getFixedT;const V=re.t;re.exists;re.setDefaultNamespace;re.hasLoadedNamespace;re.loadNamespaces;re.loadLanguages;const xs=4;function hi({offer:t,selectedNft:e,setSelectedNft:s,setNft:n,setTransactionType:r,inputDrawerHandler:i}){const o=t.props.usdt===!0;return a.jsxs(Ms,{withBorder:!0,children:[a.jsxs(W,{children:[a.jsxs(W.Col,{span:10,children:[a.jsx(v,{fz:"xs",c:"dimmed",ml:"2px",children:t.nft.collectionName}),a.jsx(v,{fw:500,ml:"2px",truncate:"end",children:t.nft.name})]}),a.jsx(W.Col,{span:2,children:a.jsx(jn,{m:"xs",color:"grape",radius:"md",size:"md",checked:e.includes(t),disabled:!e.includes(t)&&e.length>xs-1,onClick:()=>{if(e.includes(t))s(e.filter(l=>l!==t));else if(e.length<xs){const l=e.filter(c=>c.nft!==t.nft);s([...l,t])}},readOnly:!0})})]}),a.jsxs(fe,{preventGrowOverflow:!1,wrap:"nowrap",children:[a.jsx(_s,{radius:"md",src:t.nft.previewUrl,h:150,w:"auto",fit:"contain",fallbackSrc:"https://placehold.co/200x200?text=NFT"}),a.jsxs(W,{ml:-10,mr:-10,children:[a.jsxs(W.Col,{span:6,children:[a.jsxs(v,{size:"xs",children:[" ",V("Loan"),": "]})," ",a.jsxs(v,{size:"sm",fw:500,children:[t.props.size," ",o?"USDT":"TON"]}),a.jsxs(v,{size:"xs",children:[" ",V("Per day"),": "]})," ",a.jsxs(v,{size:"sm",fw:500,children:[t.props.interest," %"]})]}),a.jsxs(W.Col,{span:6,children:[a.jsxs(v,{size:"xs",children:[" ",V("Term"),": "]})," ",a.jsxs(v,{size:"sm",fw:500,children:[" ",t.props.duration," ",V("days")]}),a.jsxs(v,{size:"xs",children:[" ",V("Minimum"),": "]})," ",a.jsxs(v,{size:"xs",fw:500,children:[" ",t.props.minimal," ",o?"USDT":"TON"]})]}),a.jsx(W.Col,{span:12,children:a.jsxs(fe,{children:[a.jsxs(v,{size:"xs",children:[V("For the entire period"),": "]})," ",a.jsxs(v,{size:"xs",fw:500,children:[t.props.overPayment," ",o?"USDT":"TON"]}),a.jsxs(vt,{width:300,position:"top",withArrow:!0,shadow:"md",children:[a.jsx(vt.Target,{children:a.jsx(_e,{variant:"default",size:"xs",children:a.jsx(Cn,{})})}),a.jsx(vt.Dropdown,{children:a.jsx(v,{size:"xs",children:V(o?"The cost of the loan is calculated per day.":"The cost of the loan is calculated per second.")})})]})]})})]})]}),e.length===0&&a.jsxs(Y,{variant:"filled",fullWidth:!0,mt:"xs",color:o?"teal":"blue",onClick:()=>{n(t),r(we.GET_CREDIT),i.open()},children:[V("Get")," ",t.props.size," ",o?"USDT":"TON"]})]})}function pi({credit:t,tx:e,resetStates:s,isHolder:n,usdtWallet:r}){var o,l,c;const i=t.usdt===!0;return a.jsxs(te,{withBorder:!0,children:[a.jsxs(te.Section,{children:[a.jsx(v,{fz:"xs",c:"dimmed",ml:"2px",children:(o=t.pawn)==null?void 0:o.collectionName}),a.jsx(v,{fw:500,ml:"2px",children:(l=t.pawn)==null?void 0:l.name}),a.jsxs(fe,{preventGrowOverflow:!1,wrap:"nowrap",children:[a.jsx(Xe,{variant:"filled",radius:"sm",src:(c=t.pawn)==null?void 0:c.previewUrl,size:"xl"}),a.jsxs(W,{children:[a.jsxs(W.Col,{span:6,children:[a.jsxs(v,{size:"xs",children:[" ",V("Loan"),": ",t.size," ",i?"USDT":"TON"]}),a.jsxs(v,{size:"xs",children:[" ",V("Per day"),": ",t.interest/100," %"]})]}),a.jsx(W.Col,{span:6,children:a.jsxs(v,{size:"xs",children:[" ",V("Date"),": ",t.end.toLocaleDateString("ru-RU")," "]})}),a.jsx(W.Col,{span:12,children:a.jsxs(v,{size:"xs",children:[V("Debt"),": "," ",a.jsx(G,{value:t.debt,decimalScale:3,suffix:i?" USDT":" TON"})]})})]})]})]}),a.jsx(te.Section,{children:a.jsxs(fe,{gap:"xs",mt:"xs",grow:!0,justify:"space-between",children:[n&&!i&&a.jsx(Y,{variant:"outline",color:i?"teal":"blue",onClick:()=>e.renewalCredit(t.address,t.debt-t.size).then(d=>{console.log("tx.renewalCredit result: ",d),s()}),children:V("Extend")}),a.jsx(Y,{color:i?"teal":"blue",onClick:()=>{t.usdt?r&&e.redeemUsdtCredit(t.id,t.debt,r.address).then(d=>{console.log("tx.redeemCredit result: ",d),s()}):e.redeemCredit(t.address,t.debt).then(d=>{console.log("tx.redeemCredit result: ",d),s()})},children:V("Redeem")})]})})]},t.address)}function mi({nfts:t,credits:e,collectionNames:s,tx:n,isHolder:r,allowed:i,reloadNfts:o,resetStates:l,setNft:c,setTransactionType:d,inputDrawerHandler:u,usdtWallet:p,bankFinance:f,usdtBankFinance:x}){const{t:S}=be(),[g,b]=y.useState(""),[A,N]=y.useState([]),[k,T]=y.useState(""),[P,R]=y.useState(null),[L,Q]=y.useState([]),[M,z]=y.useState([]),[F,$]=y.useState(""),[J,se]=y.useState(!1);y.useEffect(()=>{let w=!1,B=0,Z=0;M.forEach(H=>{H.props.usdt?Z+=H.props.size:B+=H.props.size});let D=" ";B>0&&(D+=B+" TON"),B>0&&Z>0&&(D+=" & "),Z>0&&(D+=Z+" USDT"),$(D),x!==null&&x.balance/le<Z&&(w=!0),f!==null&&f.balance/Ce<B&&(w=!0),w!==J&&se(w)},[M]);const h=An({onDropdownClose:()=>{h.resetSelectedOption(),h.focusTarget(),T("")},onDropdownOpen:()=>{h.focusSearchInput()}}),m=s.filter(w=>w.toLowerCase().includes(k.toLowerCase().trim())).map(w=>a.jsx(Te.Option,{value:w,children:w},w));y.useEffect(()=>{t!==null&&z([])},[t]),y.useEffect(()=>{if(t!==null)if(P===null)Q(t);else{const w=t.filter(B=>B.nft.collectionName?B.nft.collectionName===P:!1);Q(w)}},[P,t]),y.useEffect(()=>{if(O.Address.isFriendly(g)){const w=L.filter(B=>{const Z=O.Address.parse(B.nft.address).toString();return g===Z});N(w)}else{const w=L.filter(B=>B.nft.name?B.nft.name.toLowerCase().includes(g.toLowerCase()):!1);N(w)}},[g,L]);const C=w=>{b(w.target.value)};y.useEffect(()=>{b(""),R(null),t!==null&&N(t)},[t]);const j=A.map(w=>a.jsx(hi,{offer:w,selectedNft:M,setSelectedNft:z,setNft:c,setTransactionType:d,inputDrawerHandler:u},w.nft.address+w.props.verifier)),E=e==null?void 0:e.map(w=>a.jsx(pi,{credit:w,tx:n,resetStates:l,isHolder:r,usdtWallet:p},w.address));return a.jsxs(Re,{size:"xl",pl:"0",pr:"0",children:[M.length>0&&a.jsx(Tn,{w:"100%",children:a.jsxs(Y,{fullWidth:!0,variant:"filled",disabled:J,size:"md",radius:"xs",color:"grape",onClick:()=>{Vr(M).then(w=>n.createCreditMass(w.nftAddresses,w.vItemAddresses,w.forwardPayloads))},children:[S("Get")," ",F]})}),e&&a.jsxs(a.Fragment,{children:[a.jsx(Pt,{my:"xs",label:S("In pledge"),labelPosition:"center"}),a.jsx(Ye,{cols:{base:1,md:2,lg:3},spacing:"md",children:E})]}),a.jsx(Pt,{my:"xs",label:S("My NFTs"),labelPosition:"center"}),t?a.jsx(a.Fragment,{children:t.length>0?a.jsxs(a.Fragment,{children:[a.jsxs(fe,{mb:"sm",children:[a.jsx(Nn,{radius:"xl",size:"md",style:{width:"100%",flex:1},placeholder:S("Search"),rightSectionWidth:42,value:g,onChange:C,rightSection:a.jsx(On,{"aria-label":S("Clear"),onClick:()=>{b(""),t!==null&&N(t)},style:{display:g?void 0:"none"}})}),a.jsxs(Te,{store:h,width:250,position:"bottom-start",withArrow:!0,onOptionSubmit:w=>{R(w),h.closeDropdown()},children:[a.jsx(Te.Target,{withAriaAttributes:!1,children:a.jsx(Y,{onClick:()=>h.toggleDropdown(),children:S("Collection")})}),a.jsxs(Te.Dropdown,{children:[a.jsx(Te.Search,{value:k,onChange:w=>T(w.currentTarget.value),placeholder:S("Search collection")}),a.jsx(Te.Options,{children:m.length>0?m:a.jsx(Te.Empty,{children:S("Not found")})})]})]}),a.jsx(_e,{size:"xl","aria-label":"Reload NFTs",loading:!t,loaderProps:{type:"dots"},onClick:()=>o(),children:a.jsx(ut,{})})]}),a.jsx(Ye,{cols:{base:1,md:2,lg:3},spacing:"md",children:j})]}):a.jsxs(a.Fragment,{children:[a.jsx(ot,{children:a.jsx(v,{children:S("No NFTs for collateral")})}),a.jsx(Vs,{data:i})]})}):a.jsx(et,{className:Ht.loader})]})}const gi="_card_195m4_1",xi="_cardSection_195m4_11",bi="_section_195m4_16",yi="_input_195m4_21",Si="_label_195m4_26",wi="_icon_195m4_35",vi="_balance_195m4_39",ji="_loader_195m4_46",Ci="_refresh_195m4_51",Ai="_footer_195m4_57",K={card:gi,cardSection:xi,section:bi,input:yi,label:Si,icon:wi,balance:vi,loader:ji,refresh:Ci,footer:Ai};function qs({size:t,style:e,...s}){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 32 32",style:{width:t,height:t,...e},...s,children:a.jsx("path",{d:"M17.922 17.383v-.002c-.11.008-.677.042-1.942.042c-1.01 0-1.721-.03-1.971-.042v.003c-3.888-.171-6.79-.848-6.79-1.658c0-.809 2.902-1.486 6.79-1.66v2.644c.254.018.982.061 1.988.061c1.207 0 1.812-.05 1.925-.06v-2.643c3.88.173 6.775.85 6.775 1.658c0 .81-2.895 1.485-6.775 1.657m0-3.59v-2.366h5.414V7.819H8.595v3.608h5.414v2.365c-4.4.202-7.709 1.074-7.709 2.118c0 1.044 3.309 1.915 7.709 2.118v7.582h3.913v-7.584c4.393-.202 7.694-1.073 7.694-2.116c0-1.043-3.301-1.914-7.694-2.117"})})}const rt=7;function Ti({user:t,bankFinance:e,usdtBankFinance:s,reloadAccount:n,accountLoading:r,tx:i,resetStates:o}){var H,ie;const{t:l}=be(),[c,d]=y.useState("1"),[u,p]=y.useState("1"),[f,x]=y.useState(),[S,g]=y.useState(0),[b,A]=y.useState("1"),[N,k]=y.useState("1"),[T,P]=y.useState(),[R,L]=y.useState(0),[Q,M]=y.useState(0),[z,F]=y.useState(0),[$,J]=y.useState(0),[se,h]=y.useState(0),[m,C]=y.useState(0),[j,E]=y.useState(0),[w,B]=y.useState(0),[Z,D]=y.useState(0);return y.useEffect(()=>{if(e===null)return;let I=Math.floor((e.balance+e.credits)/1e7)/100;M(I);let q=S/I*100;F(q);let ce=S,ne=e.balance/Ce;S>ne&&(ce=ne),J(ce);let ye=e.credits/Ce/I*100;h(ye)},[e,S]),y.useEffect(()=>{if(t.account!==null){let I=Math.floor(t.account.balance*t.account.rate/t.account.decimals)/t.account.decimals;g(I)}},[t.account]),y.useEffect(()=>{if(s===null)return;let I=Math.floor(100*(s.balance+s.credits)/le)/100;C(I);let q=R/I*100;E(q);let ce=R,ne=s.balance/le;R>ne&&(ce=ne),B(ce);let ye=s.credits/le/I*100;D(ye)},[s,R]),y.useEffect(()=>{if(t.usdtAccount!==null){let I=Math.floor(t.usdtAccount.balance*t.usdtAccount.rate/le)/le;L(I)}},[t.usdtAccount]),a.jsx(a.Fragment,{children:a.jsxs(Ye,{cols:{base:1,sm:4},spacing:"md",children:[t.account!==null?a.jsx(te,{withBorder:!0,radius:"md",className:K.card,children:a.jsxs(te.Section,{className:K.cardSection,children:[a.jsx(dt,{className:K.icon,size:60,radius:60,color:"blue",children:a.jsx(Pn,{style:{width:_(48),height:_(48)},stroke:1.5})}),a.jsx(v,{ta:"center",fz:"lg",fw:700,mt:"md",className:K.balance,children:a.jsx(G,{value:S,decimalScale:3,suffix:" TON"})}),a.jsx(v,{ta:"center",c:"dimmed",fz:"sm",children:l("Balance")}),a.jsxs(ae,{defaultValue:"deposit",children:[a.jsxs(ae.List,{justify:"center",children:[a.jsx(ae.Tab,{value:"deposit",children:l("Replenishment")}),a.jsx(ae.Tab,{value:"withdraw",disabled:t.account.balance<10,children:l("Withdrawal")}),a.jsx(ae.Tab,{value:"info",children:l("Info")})]}),a.jsxs(ae.Panel,{value:"deposit",children:[a.jsx(Pe,{mt:"md",label:l("Amount")+" TON",placeholder:"1",classNames:K,defaultValue:1,allowNegative:!1,min:1e-9,max:(H=t.holder)==null?void 0:H.limit,value:c,onChange:d,error:f,decimalScale:rt,decimalSeparator:",",hideControls:!0,disabled:((ie=t.holder)==null?void 0:ie.limit)===0,rightSection:a.jsx(Y,{size:"compact-md",variant:"outline",onClick:()=>{var I;d(Number((I=t.holder)==null?void 0:I.limit)),console.log("MAX Deposit: ",c+"")},children:"max"})}),a.jsx(Y,{fullWidth:!0,mt:"sm",radius:"xl",style:{flex:1},onClick:()=>{var q;let I=(q=t.holder)!=null&&q.fullLimit?t.holder.fullLimit:0;I&&t.account!==null&&(I=t.account.rate*I,console.log("Deposit Limit: ",I)),i.depositAccount(c,I).then(ce=>{console.log("tx.depositAccount result: ",ce),o()})},children:l("Top up")}),t.holder&&a.jsxs(v,{ta:"center",c:"dimmed",fz:"sm",children:[l("Available for replenishment"),": "," ",a.jsx(G,{value:Math.floor(t.holder.limit*1e3)/1e3,fixedDecimalScale:!1,suffix:" TON"})]})]}),a.jsxs(ae.Panel,{value:"withdraw",children:[a.jsx(Pe,{mt:"md",label:l("Amount")+" TON",placeholder:"1",classNames:K,defaultValue:1,allowNegative:!1,min:1e-9,max:$,value:u,onChange:p,error:f,decimalScale:rt,decimalSeparator:",",hideControls:!0,rightSection:a.jsx(Y,{size:"compact-md",variant:"outline",onClick:()=>{p($),console.log("MAX Withdraw: ",u+"")},children:"max"})}),t.account.balance>0&&a.jsx(Y,{fullWidth:!0,mt:"sm",radius:"xl",style:{flex:1},onClick:()=>{if(t.account!==null&&t.account.address!==null){x(void 0);let I=Math.floor(t.account.decimals*Number(u)/t.account.rate*t.account.decimals)+"";i.withdrawAccount(I,t.account.address.toString()).then(q=>{console.log("tx.withdrawAccount result: ",q),o()})}},children:l("Withdraw")}),a.jsxs(v,{ta:"center",c:"dimmed",fz:"sm",children:[l("Available for withdraw"),": "," ",a.jsx(G,{value:Math.floor($*1e3)/1e3,fixedDecimalScale:!1,suffix:" TON"})]})]}),e&&a.jsxs(ae.Panel,{value:"info",children:[a.jsxs(v,{c:"dimmed",fz:"sm",mt:"md",children:[l("Total pool balance"),": ",Q," TON"]}),a.jsxs(v,{c:"dimmed",fz:"sm",mt:"sm",children:[l("Pool share"),": "," ",a.jsx(G,{value:z,fixedDecimalScale:!1,decimalScale:3,suffix:" %"})]}),a.jsxs(v,{c:"dimmed",fz:"sm",mt:"sm",children:[l("APY"),": "," ",a.jsx(G,{value:(e.rate/Ce-1)*100,fixedDecimalScale:!1,decimalScale:3,suffix:" %"})]}),a.jsxs(v,{c:"dimmed",fz:"sm",mt:"sm",children:[l("Utilization rate"),": "," ",a.jsx(G,{value:se,fixedDecimalScale:!1,decimalScale:3,suffix:" %"})]})]})]}),a.jsx(_e,{className:K.refresh,"aria-label":l("Reload"),variant:"subtle",loading:r,onClick:()=>n(),children:a.jsx(ut,{})})]})}):a.jsx(et,{className:K.loader}),t.usdtAccount!==null&&a.jsx(te,{withBorder:!0,radius:"md",className:K.card,children:a.jsxs(te.Section,{className:K.cardSection,children:[a.jsx(dt,{className:K.icon,size:60,radius:60,color:"teal",children:a.jsx(qs,{style:{width:_(48),height:_(48)}})}),a.jsx(v,{ta:"center",fz:"lg",fw:700,mt:"md",className:K.balance,children:a.jsx(G,{value:R,decimalScale:3,suffix:" USDT"})}),a.jsx(v,{ta:"center",c:"dimmed",fz:"sm",children:l("Balance")}),a.jsxs(ae,{defaultValue:"deposit",children:[a.jsxs(ae.List,{justify:"center",children:[a.jsx(ae.Tab,{value:"deposit",children:l("Replenishment")}),a.jsx(ae.Tab,{value:"withdraw",disabled:t.usdtAccount.balance<10,children:l("Withdrawal")}),a.jsx(ae.Tab,{value:"info",children:l("Info")})]}),a.jsxs(ae.Panel,{value:"deposit",children:[a.jsx(Pe,{mt:"md",label:l("Amount")+" USDT",placeholder:"1",classNames:K,defaultValue:1,allowNegative:!1,min:1e-5,value:b,onChange:A,error:T,decimalScale:rt,decimalSeparator:",",hideControls:!0,rightSection:a.jsx(Y,{size:"compact-md",variant:"outline",onClick:()=>{var I,q;A(Number((I=t.usdtWallet)==null?void 0:I.balance)/Number((q=t.usdtWallet)==null?void 0:q.decimals)),console.log("MAX Deposit: ",b+"")},children:"max"})}),a.jsx(Y,{fullWidth:!0,mt:"sm",radius:"xl",style:{flex:1},onClick:()=>{if(t.usdtWallet){const I=Number(b)*t.usdtWallet.decimals;i.depositUsdtAccount(I,t.usdtWallet.address).then(q=>{console.log("tx.depositUsdtAccount result: ",q),o()})}},children:l("Top up")}),t.usdtWallet&&a.jsxs(v,{ta:"center",c:"dimmed",fz:"sm",children:[l("Available for replenishment"),": "," ",a.jsx(G,{value:Math.floor(t.usdtWallet.balance/t.usdtWallet.decimals*1e3)/1e3,fixedDecimalScale:!1,suffix:" USDT"})]})]}),a.jsxs(ae.Panel,{value:"withdraw",children:[a.jsx(Pe,{mt:"md",label:l("Amount")+" USDT",placeholder:"1",classNames:K,defaultValue:1,allowNegative:!1,min:1e-6,max:w,value:N,onChange:k,error:T,decimalScale:rt,decimalSeparator:",",hideControls:!0,rightSection:a.jsx(Y,{size:"compact-md",variant:"outline",onClick:()=>{k(w),console.log("MAX Withdraw: ",N+"")},children:"max"})}),t.usdtAccount.balance>0&&a.jsx(Y,{fullWidth:!0,mt:"sm",radius:"xl",style:{flex:1},onClick:()=>{if(t.usdtAccount!==null&&t.usdtAccount.address!==null){P(void 0);let I=Math.floor(t.usdtAccount.decimals*Number(N)/t.usdtAccount.rate*t.usdtAccount.decimals)+"";i.withdrawAccount(I,t.usdtAccount.address.toString()).then(q=>{console.log("tx.withdrawAccount (usdt) result: ",q),o()})}},children:l("Withdraw")}),a.jsxs(v,{ta:"center",c:"dimmed",fz:"sm",children:[l("Available for withdraw"),": "," ",a.jsx(G,{value:Math.floor(w*1e3)/1e3,fixedDecimalScale:!1,suffix:" USDT"})]})]}),s&&a.jsxs(ae.Panel,{value:"info",children:[a.jsxs(v,{c:"dimmed",fz:"sm",mt:"md",children:[l("Total pool balance"),": ",m," USDT"]}),a.jsxs(v,{c:"dimmed",fz:"sm",mt:"sm",children:[l("Pool share"),": "," ",a.jsx(G,{value:j,fixedDecimalScale:!1,decimalScale:5,suffix:" %"})]}),a.jsxs(v,{c:"dimmed",fz:"sm",mt:"sm",children:[l("APY"),": "," ",a.jsx(G,{value:(s.rate/le-1)*100,fixedDecimalScale:!1,decimalScale:3,suffix:" %"})]}),a.jsxs(v,{c:"dimmed",fz:"sm",mt:"sm",children:[l("Utilization rate"),": "," ",a.jsx(G,{value:Z,fixedDecimalScale:!1,decimalScale:3,suffix:" %"})]})]})]}),a.jsx(_e,{className:K.refresh,"aria-label":l("Reload"),variant:"subtle",loading:r,onClick:()=>n(),children:a.jsx(ut,{})})]})})]})})}function Ni(){const[t,e]=y.useState("light");return y.useEffect(()=>{de.initDataUnsafe.user!==void 0&&e(de.colorScheme)},[]),{colorScheme:t}}function Oi(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,n,r,i,o=[],l="",c=t.split("/");for(c[0]||c.shift();r=c.shift();)s=r[0],s==="*"?(o.push(s),l+=r[1]==="?"?"(?:/(.*))?":"/(.*)"):s===":"?(n=r.indexOf("?",1),i=r.indexOf(".",1),o.push(r.substring(1,~n?n:~i?i:r.length)),l+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~n?"?":"")+"\\"+r.substring(i))):l+="/"+r;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var Js={exports:{}},Gs={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Me=y;function Pi(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ei=typeof Object.is=="function"?Object.is:Pi,Ri=Me.useState,Li=Me.useEffect,Ui=Me.useLayoutEffect,Ii=Me.useDebugValue;function ki(t,e){var s=e(),n=Ri({inst:{value:s,getSnapshot:e}}),r=n[0].inst,i=n[1];return Ui(function(){r.value=s,r.getSnapshot=e,Tt(r)&&i({inst:r})},[t,s,e]),Li(function(){return Tt(r)&&i({inst:r}),t(function(){Tt(r)&&i({inst:r})})},[t]),Ii(s),s}function Tt(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!Ei(t,s)}catch{return!0}}function Di(t,e){return e()}var _i=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Di:ki;Gs.useSyncExternalStore=Me.useSyncExternalStore!==void 0?Me.useSyncExternalStore:_i;Js.exports=Gs;var Mi=Js.exports;const Bi=En["useInsertionEffect"],zi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$i=zi?y.useLayoutEffect:y.useEffect,Fi=Bi||$i,Xs=t=>{const e=y.useRef([t,(...s)=>e[0](...s)]).current;return Fi(()=>{e[0]=t}),e[1]},Vi="popstate",Wt="pushState",Kt="replaceState",Hi="hashchange",bs=[Vi,Wt,Kt,Hi],Wi=t=>{for(const e of bs)addEventListener(e,t);return()=>{for(const e of bs)removeEventListener(e,t)}},Ys=(t,e)=>Mi.useSyncExternalStore(Wi,t,e),Ki=()=>location.search,qi=({ssrSearch:t=""}={})=>Ys(Ki,()=>t),ys=()=>location.pathname,Ji=({ssrPath:t}={})=>Ys(ys,t?()=>t:ys),Gi=(t,{replace:e=!1,state:s=null}={})=>history[e?Kt:Wt](s,"",t),Xi=(t={})=>[Ji(t),Gi],Ss=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Ss]>"u"){for(const t of[Wt,Kt]){const e=history[t];history[t]=function(){const s=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),s}}Object.defineProperty(window,Ss,{value:!0})}const Yi=(t="",e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",Qi=(t,e="")=>t[0]==="~"?t.slice(1):e+t,Zi=t=>{try{return decodeURI(t)}catch{return t}},Qs={hook:Xi,searchHook:qi,parser:Oi,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},Zs=y.createContext(Qs),tt=()=>y.useContext(Zs),en={},tn=y.createContext(en),ea=()=>y.useContext(tn),St=t=>{const[e,s]=t.hook(t);return[Zi(Yi(t.base,e)),Xs((n,r)=>s(Qi(n,t.base),r))]},ta=()=>St(tt()),sn=(t,e,s,n)=>{const{pattern:r,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",n),o=r.exec(s)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((p,f)=>[p,c[f]])):o.groups;let u={...c};return d&&Object.assign(u,d),u})(),...n?[l]:[]]:[!1,null]},sa=({children:t,...e})=>{var u,p;const s=tt(),n=e.hook?Qs:s;let r=n;const[i,o]=((u=e.ssrPath)==null?void 0:u.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((p=e.hook)==null?void 0:p.hrefs);let l=y.useRef({}),c=l.current,d=c;for(let f in n){const x=f==="base"?n[f]+(e[f]||""):e[f]||n[f];c===d&&x!==d[f]&&(l.current=d={...d}),d[f]=x,x!==n[f]&&(r=d)}return y.createElement(Zs.Provider,{value:r,children:t})},ws=({children:t,component:e},s)=>e?y.createElement(e,{params:s}):typeof t=="function"?t(s):t,na=t=>{let e=y.useRef(en),s=e.current;for(const n in t)t[n]!==s[n]&&(s=t);return e.current=s},Oe=({path:t,nest:e,match:s,...n})=>{const r=tt(),[i]=St(r),[o,l,c]=s??sn(r.parser,t,i,e),d=na({...ea(),...l});if(!o)return null;const u=c?y.createElement(sa,{base:c},ws(n,d)):ws(n,d);return y.createElement(tn.Provider,{value:d,children:u})},ke=y.forwardRef((t,e)=>{const s=tt(),[n,r]=St(s),{to:i,href:o=i,onClick:l,asChild:c,children:d,className:u,replace:p,state:f,...x}=t,S=Xs(b=>{b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||b.button!==0||(l==null||l(b),b.defaultPrevented||(b.preventDefault(),r(o,t)))}),g=s.hrefs(o[0]==="~"?o.slice(1):s.base+o,s);return c&&y.isValidElement(d)?y.cloneElement(d,{onClick:S,href:g}):y.createElement("a",{...x,onClick:S,href:g,className:u!=null&&u.call?u(n===o):u,children:d,ref:e})}),nn=t=>Array.isArray(t)?t.flatMap(e=>nn(e&&e.type===y.Fragment?e.props.children:e)):[t],ra=({children:t,location:e})=>{const s=tt(),[n]=St(s);for(const r of nn(t)){let i=0;if(y.isValidElement(r)&&(i=sn(s.parser,r.props.path,e||n,r.props.nest))[0])return y.cloneElement(r,{match:i})}return null},ia="_icon_1u5u8_1",aa="_dark_1u5u8_6",oa="_light_1u5u8_16",la="_inner_1u5u8_26",ca="_main_1u5u8_33",da="_txt_1u5u8_37",De={icon:ia,dark:aa,light:oa,inner:la,main:ca,txt:da},rn=1e3;var Ve=[],vs=0,Dt=1.2,qe=rn/Dt;const ua=t=>{Dt=t,qe=rn/Dt},ct=t=>{let e,s=Date.now();if(t!==void 0?s-vs<qe?(Ve.push(t),Ve.length===1&&setTimeout(ct,qe)):e=t:e=Ve.shift(),e!==void 0){let n=e;vs=s,fetch(e.url,e.data).then(r=>{n.onResponse(r),Ve.length>0&&setTimeout(ct,qe)}).catch(r=>{n.onError(r),Ve.length>0&&setTimeout(ct,qe)})}},an=(t,e)=>new Promise((s,n)=>{ct({url:t,data:e,onResponse:s,onError:n})}),_t={method:"get"};let Mt;const he={ACCOUNTS:"accounts/",COLLECTIONS:"nfts/collections/",BLOCKCHAIN_ACCOUNTS:"blockchain/accounts/"},pe={NONE:"",NFTS:"/nfts",ITEMS:"/items",JETTONS:"/jettons",METHODS:"/methods",EVENTS:"/events",TRANSACTIONS:"/transactions"};function me(t,e,s,n){let r=Mt+e+t+s;return n!==void 0&&(r+=n),an(r,_t).then(i=>i.json())}const ve={init:async t=>{_t.headers=new Headers({Authorization:"Bearer "+t.tonApiProps.clientSideKey,"Content-Type":"application/json",accept:"application/json"}),Mt=t.tonApiProps.serverUrl,t.tonApiProps.limitPerSecond&&ua(t.tonApiProps.limitPerSecond)},account:async t=>me(t.toRawString(),he.ACCOUNTS,pe.NONE),accountNfts:async(t,e,s,n)=>e===void 0?me(t.toRawString(),he.ACCOUNTS,pe.NFTS):me(t.toRawString(),he.ACCOUNTS,pe.NFTS,"?indirect_ownership="+(e?"true":"false")+(s!==void 0?"&limit="+s:"")+(n!==void 0?"&offset="+n:"")),accountJettons:async t=>me(t.toRawString(),he.ACCOUNTS,pe.JETTONS),method:async(t,e,s)=>me(t.toString(),he.BLOCKCHAIN_ACCOUNTS,pe.METHODS,s!==void 0?"/"+e+"?args="+s:"/"+e),nftBulk:async t=>{const e={method:"post",body:JSON.stringify({account_ids:t}),headers:_t.headers};return an(Mt+"nfts/_bulk",e).then(s=>s.json())},accountEvents:async(t,e,s,n)=>{let r;return typeof t=="string"?r=t:r=t.toRawString(),me(r,he.ACCOUNTS,pe.EVENTS,"?limit="+(e!==void 0?e:"10")+(s!==void 0?"&start_date="+s:"")+(n!==void 0?"&end_date="+n:""))},accountTransactions:async(t,e,s,n)=>{let r;return typeof t=="string"?r=t:r=t.toRawString(),me(r,he.BLOCKCHAIN_ACCOUNTS,pe.TRANSACTIONS,"?limit="+(e!==void 0?e:"10")+(s!==void 0?"&before_lt="+s:"")+(n!==void 0?"&after_lt="+n:""))},collection:async t=>me(t.toRawString(),he.COLLECTIONS,pe.NONE),collectionNfts:async(t,e,s)=>e===void 0?me(t.toRawString(),he.COLLECTIONS,pe.ITEMS):me(t.toRawString(),he.COLLECTIONS,pe.ITEMS,"?limit="+e+(s!==void 0?"&offset="+s:""))};function Bt(t){const e={},s=t.metadata.attributes;return s instanceof Array&&s.map(r=>e[r.trait_type]=r.value),{address:t.address,owner:t.owner.address,previewUrl:t.previews[2].url,name:t.metadata.name,collectionName:" ",collectionAddress:" ",description:t.metadata.description,attributes:e,tokenId:t.index,addressFriendly:O.Address.parse(t.address).toString()}}function on(t,e,s,n){const r=[],i=[],o={};t.map(l=>{const c=l.collection;if(c!==void 0&&e.indexOf(c.address)>-1){const d=Bt(l);d.collectionName=c.name,d.collectionAddress=c.address,s.indexOf(c.address)<0&&(o[c.name]=c.name),r.push(d);return}if(n.indexOf(l.address)>-1){const d=Bt(l);r.push(d);return}});for(const l in o)i.push(l);return{nftItems:r,collectionNames:i}}function fa(t,e,s,n){return ha(t,e,s,n).then(r=>{let i=r.nftItems,o=r.collectionNames;return{nftItems:i,collectionNames:o}})}async function ha(t,e,s,n){let r=1e3,i=0,o=[];for(;r>0;){let l=await ve.accountNfts(t,!1,r,i);const c=l.nft_items;c instanceof Array?(c.length<r&&(r=0),o.push(...c),i+=r):Promise.reject("[getListNft] Error: "+JSON.stringify(l))}return on(o,e,s,n)}const js={STATUS_NOT_INIT:0,STATUS_INIT:1,STATUS_ACTIVE:2,STATUS_INACTIVE:3,STATUS_AUCTION_STARTED:4};function pa(t,e){const s=t.name.startsWith("USDT"),n=s?le:Ce,r=s?Ke:We;let i=t.description.split("+");const o=+i[3]/n,l=+i[4],c=+i[5],d=+i[6],u=Math.floor(Date.now()/1e3);let p,f=u-d;s?f=(Math.floor(f/$e)+1)*$e:f<$e&&(f=$e);let x=o*f*l/$e/Br;x<r&&(x=r);const S=o+x,g=new Date((d+c)*1e3);let b=+i[2];if(b===js.STATUS_ACTIVE)g.getTime()<Date.now()?b=X.WAIT_START_BID:b=X.ACTIVE;else if(b===js.STATUS_AUCTION_STARTED){b=X.AUCTION_STARTED;const N=+i[7]/n,k=i[8],T=new Date(+i[9]*1e3);p={bid:N,bidder:k,finish:T,isMy:e==k},T.getTime()<Date.now()&&(b=X.AUCTION_FINISHED)}else b=X.ERROR;return{id:Number(t.tokenId),address:t.address,borrower:t.owner,pawnAddress:i[1],status:b,size:o,interest:l,duration:c,start:d,debt:S,end:g,auction:p,usdt:s}}async function ln(t,e,s){const n=[],r={},i=[];if(t.map(o=>{const l=pa(o,e);s?l.status<X.AUCTION_STARTED&&(n.push(l),r[l.pawnAddress]=l,i.push(l.pawnAddress)):(n.push(l),r[l.pawnAddress]=l,i.push(l.pawnAddress))}),i.length>0){const l=(await ve.nftBulk(i)).nft_items;l instanceof Array&&l.map(c=>{const d=Bt(c);d.collectionName=c.collection.name,d.collectionAddress=c.collection.address;let u=r[d.addressFriendly];u&&(u.pawn=d)})}return console.log("[getListCredit] creditList: ",n),n}async function ma(t,e){const s=[];for(let r=0;r<t.length;r++){const i=t[r];let o=1e3,l=0;for(;o>0;){let c=await ve.collectionNfts(O.Address.parse(i),o,l);const d=c.nft_items;d instanceof Array?(d.length<o&&(o=0),s.push(...d),l+=o):Promise.reject("[getListNft] Error: "+JSON.stringify(c))}}const n=on(s,t,[],[]);return ln(n.nftItems,e)}let Se=null,it=null,Nt=null;function ga(t){const e=t.allowedUsdtCollectionsProps!==void 0?t.allowedUsdtCollectionsProps:[],[s]=y.useState({address:null,account:null,usdtAccount:null,holder:null}),[n,r]=y.useState(!0),[i,o]=y.useState(null),[l,c]=y.useState(null),[d,u]=y.useState(null),[p,f]=y.useState(null),[x,S]=y.useState([]),g=bt(),b=O.Address.parse(t.bankAddress),A=t.usdtBankAddress?O.Address.parse(t.usdtBankAddress):null,N=t.publicSale?O.Address.parse(t.publicSale.saleContractAddress):null,k=t.usdtMaster?O.Address.parse(t.usdtMaster):null,T=t.holderCollections,P=t.creditCollectionAddress,R=[];for(let m=0;m<t.allowedCollectionsProps.length;m++){const C=t.allowedCollectionsProps[m];R.push(C.address)}const L=[];for(let m=0;m<e.length;m++){const C=e[m];L.push(C.address)}const Q=[];for(let m=0;m<t.allowedCustomNftProps.length;m++){const C=t.allowedCustomNftProps[m];Q.push(C.address)}const M=()=>(r(!0),new Promise((m,C)=>{ve.method(b,"get_finance").then(j=>{if(j.success===!0){let E={balance:Number(j.stack[0].num),rate:Number(j.stack[1].num),credits:Number(j.stack[2].num)};console.log("[reloadBank] financeData: ",j),it=E,m(E)}else C("[reloadBank] Error get_finance:: "+JSON.stringify(j))})})),z=()=>new Promise((m,C)=>{A===null?m(!0):ve.method(A,"get_finance").then(j=>{if(j.success===!0){let E={balance:Number(j.stack[0].num),rate:Number(j.stack[1].num),credits:Number(j.stack[2].num)};console.log("[reloadUsdtBank] financeData: ",j),Nt=E,m(E)}else C("[reloadBank] Error get_finance:: "+JSON.stringify(j))})}),F=()=>Se===null?Promise.reject("[reloadAccount] myAddress is null"):ve.accountJettons(Se).then(m=>{if(it===null)return Promise.reject("[reloadAccount] bankFinance is null");const C=it,j=Nt;console.log("[reloadAccount] data: ",m);let E=m.balances,w=null,B=null,Z=null;if(E){for(let D=0;D<E.length;D++){const H=E[D],ie=O.Address.parse(H.jetton.address);b.equals(ie)?w=H:A&&A.equals(ie)?B=H:k&&k.equals(ie)&&(Z=H)}if(Z!==null&&(s.usdtWallet={address:O.Address.parse(Z.wallet_address.address),balance:Number(Z.balance),decimals:Math.pow(10,Z.jetton.decimals)}),B!==null){const D=Math.pow(10,B.jetton.decimals),H={address:O.Address.parse(B.wallet_address.address),balance:Number(B.balance),decimals:D,rate:D};j&&(H.rate=j.rate),s.usdtAccount=H}else j!==null&&(s.usdtAccount={address:null,balance:0,decimals:Ce,rate:j.rate});if(w!==null){const D=Math.pow(10,w.jetton.decimals),H={address:O.Address.parse(w.wallet_address.address),balance:Number(w.balance),decimals:D,rate:C.rate};s.account=H}else s.account={address:null,balance:0,decimals:Ce,rate:C.rate};if(s.holder){let D=s.holder.fullLimit;D-=s.account.rate/s.account.decimals*s.account.balance/s.account.decimals,s.holder.limit=D,s.holder.limit<0&&(s.holder.limit=0)}return r(!1),!0}}),$=()=>{if(o(null),c(null),Se===null)return Promise.reject("[reloadNfts] MyAddress is null");let m=[...R,...L,...T,...P];return fa(Se,m,P,Q).then(C=>{console.log("[reloadNfts] data: ",C),S(C.collectionNames);let j=[],E=[],w=0;const B=t.holderCollectionsProps,Z=t.allowedCollectionsProps,D=e,H=t.allowedCustomNftProps;for(let ie=0;ie<C.nftItems.length;ie++){const I=C.nftItems[ie];let q=I.collectionAddress,ce=T.indexOf(q);if(ce>-1){let qt=B[ce].limitAttributeName,wt=B[ce].limitAttributes;if(qt){let Jt=I.attributes[qt];if(Jt){let Gt=wt[Jt],bn=Gt===void 0?wt.default:Gt;w+=bn}}else w+=wt.default}const ne=Q.indexOf(I.address);ne>-1&&j.push({props:H[ne],nft:I});const ye=R.indexOf(q);ye>-1&&ne===-1&&j.push({props:Z[ye],nft:I});const Ae=L.indexOf(q);Ae>-1&&ne===-1&&j.push({props:D[Ae],nft:I}),P.indexOf(q)>-1&&E.push(I)}if(o(j),w>0){let ie={limit:w,fullLimit:w};s.holder=ie}if(E.length>0)return ln(E,"",!0).then(ie=>{c(ie)})})},J=()=>Se===null?Promise.reject("[reloadAuctions] myAddress is null"):s.holder===null?Promise.resolve(!1):ma(P,Se.toString()).then(m=>{u(m)}),se=()=>new Promise((m,C)=>{N===null?m(!0):ve.method(N,"getData").then(j=>{if(j.success===!0){let E={price:Number(j.stack[0].num),reserve:Number(j.stack[1].num),tokensSold:Number(j.stack[2].num),refsTaked:Number(j.stack[3].num)};console.log("[reloadPublicSale] salerData: ",j),f(E),m(E)}else C("[reloadPublicSale] Error get_finance:: "+JSON.stringify(j))})});return y.useEffect(()=>{if(g===null){Se=null,s.address=null,s.account=null,s.holder=null,o(null),c(null),se();return}Se=O.Address.parse(g.account.address),s.address=Se,M().then(z).then($).then(F).then(se).then(J)},[g,t]),{user:s,reloadAccount:F,accountLoading:n,bankFinance:it,usdtBankFinance:Nt,publicSale:p,nfts:i,credits:l,auctions:d,collectionNames:x,reloadNftsAndAuctions:()=>$().then(()=>J()),reloadPublicSale:se}}function xa({activeState:t,errorState:e}){const{t:s}=be();return a.jsxs(st,{active:t,orientation:"vertical",children:[a.jsx(st.Step,{label:s("Transaction"),description:s("Confirm the transaction in your wallet"),loading:t===1&&e!==1,completedIcon:e===1?a.jsx(Qt,{style:{width:_(20),height:_(20)}}):"",color:e===1?"red":""}),a.jsx(st.Step,{label:s("Checking"),description:s("Checking the transaction progress. Please wait."),loading:t===2&&e!==2,completedIcon:e===2?a.jsx(Qt,{style:{width:_(20),height:_(20)}}):"",color:e===2?"red":""}),a.jsx(st.Step,{label:s("Update"),description:s("Updating data from the blockchain."),loading:t===3})]})}function ba({activeState:t,errorState:e}){const[s,{open:n,close:r}]=lt(!1),{t:i}=be();return y.useEffect(()=>{t>0?(console.log("[TransactionModal] open: ",t),n()):(console.log("[TransactionModal] close: ",t),r())},[t]),a.jsx(Rn,{opened:s,onClose:r,title:i("Conducting a transaction"),centered:!0,children:t>0&&a.jsx(xa,{activeState:t,errorState:e})})}const Cs=4,ge=O.toNano("0.20"),He=O.toNano("0.1"),cn=O.toNano("0.03"),As=(2n*cn+ge).toString(),Ts=(t,e,s)=>O.beginCell().storeUint(1607220500,32).storeUint(0,64).storeAddress(e).storeAddress(t).storeUint(0,1).storeCoins(ge).storeBuilder(s.asBuilder()).endCell();function ya(t){const[e]=xt(),s=bt(),[n,r]=y.useState("");return y.useEffect(()=>{r(s===null?"":s.account.address)},[s]),{sender:{depositAccount:async(i,o)=>{const l=O.beginCell().storeUint(65537,32).storeUint(1,64).storeCoins(O.toNano(i)).storeCoins(BigInt(o)).endCell(),c=O.toNano(i)+He,d={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:t.bankAddress,amount:c.toString(),payload:l.toBoc().toString("base64")}]};return e.sendTransaction(d)},withdrawAccount:async(i,o)=>{const l=O.beginCell().storeUint(1499400124,32).storeUint(1,64).storeCoins(BigInt(i)).storeAddress(O.Address.parse(n)).storeUint(0,1).endCell(),c={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:o,amount:He.toString(),payload:l.toBoc().toString("base64")}]};return e.sendTransaction(c)},createCredit:async(i,o,l)=>{const c=Ts(O.Address.parse(n),O.Address.parse(o),l),d={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:As,payload:c.toBoc().toString("base64")}]};return e.sendTransaction(d)},createCreditMass:async(i,o,l)=>{const c=[],d=i.length>Cs?Cs:i.length,u=O.Address.parse(n);for(let f=0;f<d;f++){const x=Ts(u,O.Address.parse(o[f]),l[f]);c.push({address:i[f],amount:As,payload:x.toBoc().toString("base64")})}const p={validUntil:Math.floor(Date.now()/1e3)+360,messages:c};return e.sendTransaction(p)},renewalCredit:async(i,o)=>{const l=O.beginCell().storeUint(65541,32).storeUint(1,64).endCell();let c=O.toNano(o)+cn;const d={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:c.toString(),payload:l.toBoc().toString("base64")}]};return e.sendTransaction(d)},redeemCredit:async(i,o)=>{const l=O.beginCell().storeUint(65540,32).storeUint(1,64).endCell();let c=O.toNano(o)+ge;const d={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:c.toString(),payload:l.toBoc().toString("base64")}]};return e.sendTransaction(d)},makeBid:async(i,o)=>{const l=O.toNano(o),c=O.beginCell().storeUint(65542,32).storeUint(1,64).storeCoins(l).endCell();let d=l+ge;const u={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:d.toString(),payload:c.toBoc().toString("base64")}]};return e.sendTransaction(u)},takeLot:async i=>{const o=O.beginCell().storeUint(65543,32).storeUint(1,64).endCell(),l={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:ge.toString(),payload:o.toBoc().toString("base64")}]};return e.sendTransaction(l)},depositUsdtAccount:async(i,o)=>{const l=O.Address.parse(n),c=O.beginCell().storeUint(196609,32).endCell(),d=O.beginCell().storeUint(260734629,32).storeUint(0,64).storeCoins(i).storeAddress(O.Address.parse(t.usdtBankAddress)).storeAddress(l).storeMaybeRef(null).storeCoins(He/2n).storeBit(!0).storeRef(c).endCell(),u=He,p={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:o.toString(),amount:u.toString(),payload:d.toBoc().toString("base64")}]};return e.sendTransaction(p)},redeemUsdtCredit:async(i,o,l)=>{const c=O.Address.parse(n),d=O.beginCell().storeUint(65540,32).storeUint(i,32).endCell(),u=o*le,p=O.beginCell().storeUint(260734629,32).storeUint(0,64).storeCoins(u).storeAddress(O.Address.parse(t.usdtVerifier)).storeAddress(c).storeMaybeRef(null).storeCoins(ge-O.toNano("0.02")).storeBit(!0).storeRef(d).endCell(),f={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:l.toString(),amount:ge.toString(),payload:p.toBoc().toString("base64")}]};return e.sendTransaction(f)},takeUsdtPawn:async(i,o,l)=>{const c=O.Address.parse(n),d=O.beginCell().storeUint(65543,32).storeUint(i,32).endCell(),u=o*le,p=O.beginCell().storeUint(260734629,32).storeUint(0,64).storeCoins(u).storeAddress(O.Address.parse(t.usdtVerifier)).storeAddress(c).storeMaybeRef(null).storeCoins(ge-O.toNano("0.02")).storeBit(!0).storeRef(d).endCell(),f={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:l.toString(),amount:ge.toString(),payload:p.toBoc().toString("base64")}]};return e.sendTransaction(f)},publicSale:async(i,o,l)=>{var S;const c=O.Address.parse(n),d=Math.floor(i*le),u=Math.floor(d-d*l/100),p=O.beginCell().storeCoins(u).storeAddress(null).endCell(),f=O.beginCell().storeUint(260734629,32).storeUint(0,64).storeCoins(d).storeAddress(O.Address.parse((S=t.publicSale)==null?void 0:S.saleContractAddress)).storeAddress(c).storeMaybeRef(null).storeCoins(He).storeBit(!0).storeRef(p).endCell(),x={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:o.toString(),amount:ge.toString(),payload:f.toBoc().toString("base64")}]};return e.sendTransaction(x)},walletAddress:n}}}const ee={NONE:0,APPROVE:1,CHECK:2,RELOAD:3},zt=[1e4,15e3,2e4,3e4];function dn(t,e,s,n,r,i){ve.accountTransactions(r,5).then(o=>{console.log("--+ Tonapi.accountTransactions: ",o),console.log("--+ Tonapi.accountTransactions extHash: ",i);const l=o.transactions;let c=!0;if(l instanceof Array&&l.length>0)for(let d=0;d<l.length;d++){const u=l[d];if(u.in_msg.hash===i&&u.success===!0){c=!1,t("Ok");break}}if(c){const d=s+1;d>3?e("Max attempt"):setTimeout(()=>{dn(t,e,d,n,r,i)},zt[d-1])}}).catch(o=>e(o))}function Sa(t,e,s,n){const{sender:r}=ya(t),[i,o]=y.useState(ee.NONE),[l,c]=y.useState(ee.NONE),[d,u]=y.useState(0),p=()=>{o(ee.NONE),c(ee.NONE)},f=(g,b)=>{o(ee.CHECK);const A=O.Cell.fromBase64(b).hash().toString("hex");return new Promise((N,k)=>{setTimeout(()=>{dn(N,k,1,d,g,A)},zt[0])}).catch(N=>{console.warn("useSendTransaction STATE.CHECK sellNft: ",i,N),c(ee.CHECK)})},x=g=>(o(ee.RELOAD),new Promise((b,A)=>{setTimeout(()=>{g().then(b).catch(A)},zt[3])}).catch(b=>{console.warn("useSendTransaction STATE.RELOAD doReload: ",i,b),c(ee.RELOAD)})),S=g=>{console.warn("useSendTransaction STATE.APPROVE catchApprove: ",i,g),c(ee.APPROVE)};return{tx:{depositAccount:async(g,b)=>(o(ee.APPROVE),u(Math.floor(Date.now()/1e3)),r.depositAccount(g,b).then(A=>f(r.walletAddress,A.boc)).then(()=>x(e)).catch(S)),withdrawAccount:async(g,b)=>(o(ee.APPROVE),u(Math.floor(Date.now()/1e3)),r.withdrawAccount(g,b).then(A=>f(r.walletAddress,A.boc)).then(()=>x(e)).catch(S)),createCredit:async(g,b,A)=>(o(ee.APPROVE),u(Math.floor(Date.now()/1e3)),r.createCredit(g,b,A).then(N=>f(r.walletAddress,N.boc)).then(()=>x(s)).catch(S)),createCreditMass:async(g,b,A)=>(o(ee.APPROVE),u(Math.floor(Date.now()/1e3)),r.createCreditMass(g,b,A).then(N=>f(r.walletAddress,N.boc)).then(()=>x(s)).catch(S)),redeemCredit:async(g,b)=>(o(ee.APPROVE),u(Math.floor(Date.now()/1e3)),r.redeemCredit(g,b).then(A=>f(r.walletAddress,A.boc)).then(()=>x(s)).catch(S)),renewalCredit:async(g,b)=>(o(ee.APPROVE),u(Math.floor(Date.now()/1e3)),r.renewalCredit(g,b).then(A=>f(r.walletAddress,A.boc)).then(()=>x(s)).catch(S)),makeBid:async(g,b)=>(o(ee.APPROVE),u(Math.floor(Date.now()/1e3)),r.makeBid(g,b).then(A=>f(r.walletAddress,A.boc)).then(()=>x(s)).catch(S)),takeLot:async g=>(o(ee.APPROVE),u(Math.floor(Date.now()/1e3)),r.takeLot(g).then(b=>f(r.walletAddress,b.boc)).then(()=>x(s)).catch(S)),depositUsdtAccount:async(g,b)=>(o(ee.APPROVE),u(Math.floor(Date.now()/1e3)),r.depositUsdtAccount(g,b).then(A=>f(r.walletAddress,A.boc)).then(()=>x(e)).catch(S)),redeemUsdtCredit:async(g,b,A)=>(o(ee.APPROVE),u(Math.floor(Date.now()/1e3)),r.redeemUsdtCredit(g,b,A).then(N=>f(r.walletAddress,N.boc)).then(()=>x(s)).catch(S)),takeUsdtPawn:async(g,b,A)=>(o(ee.APPROVE),u(Math.floor(Date.now()/1e3)),r.takeUsdtPawn(g,b,A).then(N=>f(r.walletAddress,N.boc)).then(()=>x(s)).catch(S)),publicSale:async(g,b,A)=>(o(ee.APPROVE),u(Math.floor(Date.now()/1e3)),r.publicSale(g,b,A).then(N=>f(r.walletAddress,N.boc)).then(()=>x(n)).then(()=>x(e)).catch(S))},activeState:i,errorState:l,resetStates:p}}const wa=["Error","Not expired","Loan repaid","Waiting for the bid","Auction in progress","Auction is over"];function va({auction:t,tx:e,resetStates:s,setCredit:n,setTransactionType:r,inputDrawerHandler:i,usdtWallet:o}){var c,d,u,p,f,x,S,g;const l=t.usdt===!0;return a.jsxs(te,{withBorder:!0,children:[a.jsxs(te.Section,{children:[a.jsx(v,{fz:"xs",c:"dimmed",ml:"2px",children:(c=t.pawn)==null?void 0:c.collectionName}),a.jsx(v,{fw:500,ml:"2px",children:(d=t.pawn)==null?void 0:d.name}),a.jsxs(fe,{preventGrowOverflow:!1,wrap:"nowrap",children:[a.jsx(Xe,{variant:"filled",radius:"sm",src:(u=t.pawn)==null?void 0:u.previewUrl,size:"xl"}),a.jsxs(W,{children:[t.status<X.AUCTION_STARTED&&a.jsxs(a.Fragment,{children:[a.jsx(W.Col,{span:6,children:a.jsxs(v,{size:"xs",children:[" ",V("Loan"),": ",t.size," ",l?"USDT":"TON"]})}),a.jsx(W.Col,{span:6,children:a.jsxs(v,{size:"xs",children:[" ",V("Date"),": ",t.end.toLocaleDateString("ru-RU")," "]})})]}),t.status===X.AUCTION_STARTED&&a.jsx(W.Col,{span:12,children:a.jsxs(v,{size:"xs",children:[" ",V("End"),": ",((p=t.auction)==null?void 0:p.finish.toLocaleDateString("ru-RU"))+" "+((f=t.auction)==null?void 0:f.finish.toLocaleTimeString("ru-RU"))," "]})}),a.jsx(W.Col,{span:12,children:a.jsxs(v,{size:"xs",children:[V("Status"),": ",l&&t.status===X.WAIT_START_BID?V("Waiting for ransom"):V(wa[t.status]),"."]})}),a.jsxs(W.Col,{span:12,children:[!l&&t.status<X.AUCTION_STARTED&&a.jsxs(v,{size:"xs",children:[V("Start bid"),": "," ",a.jsx(G,{value:It*t.size+t.size,decimalScale:3,suffix:l?" USDT":" TON"})]}),l&&t.status<X.AUCTION_STARTED&&a.jsxs(v,{size:"xs",children:[V("Redemption cost"),": "," ",a.jsx(G,{value:t.debt,decimalScale:3,suffix:l?" USDT":" TON"})]}),a.jsxs(fe,{children:[t.status===X.AUCTION_STARTED&&a.jsxs(v,{size:"xs",children:[V("Current bid"),": "," ",a.jsx(G,{value:(x=t.auction)==null?void 0:x.bid,decimalScale:3,suffix:l?" USDT":" TON"})]}),((S=t.auction)==null?void 0:S.isMy)&&a.jsxs(v,{c:"teal.4",size:"xs",children:[" ",V("My")," "]})]})]})]})]})]}),a.jsxs(te.Section,{children:[!l&&t.status>X.CREDIT_CLOSED&&t.status<X.AUCTION_FINISHED&&a.jsx(Y,{variant:"filled",fullWidth:!0,mt:"xs",onClick:()=>{n(t),r(we.MAKE_BET),i.open()},children:V("Make bid")}),!l&&t.status===X.AUCTION_FINISHED&&((g=t.auction)==null?void 0:g.isMy)&&a.jsx(Y,{variant:"filled",fullWidth:!0,mt:"xs",onClick:()=>{e.takeLot(t.address).then(b=>{console.log("tx.makeBid result: ",b),s()})},children:V("Take lot")}),l&&t.status>X.CREDIT_CLOSED&&t.status<X.AUCTION_FINISHED&&a.jsx(Y,{variant:"filled",fullWidth:!0,mt:"xs",onClick:()=>{o&&e.takeUsdtPawn(t.id,t.debt,o.address).then(b=>{console.log("tx.makeBid result: ",b),s()})},children:V("Buy out")})]})]},t.address)}function ja({auctions:t,tx:e,resetStates:s,setCredit:n,setTransactionType:r,inputDrawerHandler:i,usdtWallet:o}){const{t:l}=be(),[c,d]=y.useState([]);y.useEffect(()=>{if(t===null)return;const p=[...t];p.sort(function(f,x){return f.end.getTime()-x.end.getTime()}),d(p)},[t]);const u=c.map(p=>a.jsx(va,{auction:p,tx:e,resetStates:s,setCredit:n,setTransactionType:r,inputDrawerHandler:i,usdtWallet:o},p.address));return a.jsxs(Re,{size:"xl",pl:"0",pr:"0",children:[a.jsx(Pt,{my:"xs",label:l("Auctions"),labelPosition:"center"}),t?a.jsx(Ye,{cols:{base:1,md:2,lg:3},spacing:"md",children:u}):a.jsx(et,{className:Ht.loader})]})}const Ca=["Borrow","Make bid"];function Aa({offer:t,auction:e,transactionType:s,opened:n,handler:r,tx:i,resetStates:o,bankFinance:l,usdtBankFinance:c}){var P,R,L,Q,M;const{t:d}=be(),[u,p]=y.useState(1),[f,x]=y.useState(1),[S,g]=y.useState(0),[b,A]=y.useState(1),[N,k]=y.useState(.1),T=(t==null?void 0:t.props.usdt)===!0;return y.useEffect(()=>{if(s===we.GET_CREDIT&&t!==null){const z=t.props.interest/100;let F=t.props.duration*Number(u)*z;T&&F<Ke?F=Ke:F<We&&(F=We),A(parseFloat(F.toFixed(3)));let $=Number(u)*z;T&&$<Ke?$=Ke:$<We&&($=We),k(parseFloat($.toFixed(2)))}},[u,t]),y.useEffect(()=>{if(s===we.GET_CREDIT&&t!==null&&p(t.props.size),s===we.MAKE_BET&&e!==null){let z=0;e.status===X.WAIT_START_BID&&(z=It*e.size+e.size),e.status===X.AUCTION_STARTED&&(z=It*e.size+e.auction.bid),z=Math.floor(z*1e3)/1e3,x(z),p(z)}},[s,t,e]),y.useEffect(()=>{if(t!=null&&t.props.usdt){if(c===null)return;let z=c.balance/le;g(z)}else{if(l===null)return;let z=l.balance/Ce;g(z)}},[l,c,t]),a.jsxs(Ln,{opened:n,onClose:()=>{r.close()},position:"top",size:"md",overlayProps:{backgroundOpacity:.5,blur:4},transitionProps:{transition:"rotate-left",duration:150,timingFunction:"linear"},closeButtonProps:{icon:a.jsx(Un,{size:32,stroke:1.5})},title:d(Ca[s]),children:[a.jsx(In.InitialFocus,{}),t!==null&&l!==null&&s===we.GET_CREDIT?a.jsxs(a.Fragment,{children:[a.jsxs(te,{withBorder:!0,children:[a.jsxs(te.Section,{children:[a.jsx(v,{fz:"xs",c:"dimmed",ml:"2px",children:t.nft.collectionName}),a.jsx(v,{fw:500,ml:"2px",truncate:"end",children:t.nft.name}),a.jsxs(fe,{preventGrowOverflow:!1,wrap:"nowrap",children:[a.jsx(Xe,{variant:"filled",radius:"sm",src:t.nft.previewUrl,size:"xl"}),a.jsxs(W,{children:[a.jsxs(W.Col,{span:6,children:[a.jsxs(v,{size:"xs",children:[" ",d("Loan"),": ",t.props.size," ",T?"USDT":"TON"]}),a.jsxs(v,{size:"xs",children:[" ",d("Per day"),": ",t.props.interest," %"]})]}),a.jsxs(W.Col,{span:6,children:[a.jsxs(v,{size:"xs",children:[" ",d("Term"),": ",t.props.duration," ",d("days")]}),a.jsxs(v,{size:"xs",children:[" ",d("Minimum"),": ",N," ",T?"USDT":"TON"]})]}),a.jsx(W.Col,{span:12,children:a.jsxs(v,{size:"xs",children:[d("For the entire period"),": ",b," ",T?"USDT":"TON"]})})]})]})]}),a.jsx(te.Section,{})]},t.nft.address),a.jsx(Pe,{label:d("Enter the loan amount")+(T?" USDT":" TON"),description:d("Maximum")+": "+t.props.size+(T?" USDT":" TON"),defaultValue:t.props.size,allowNegative:!1,value:u,onChange:p,allowedDecimalSeparators:[".",","],clampBehavior:"strict",min:1,max:t.props.size}),Number(u)<S?a.jsxs(Y,{variant:"filled",color:T?"teal":"blue",fullWidth:!0,mt:"xs",onClick:()=>{r.close(),Hs(t,Number(u)).then(z=>{i.createCredit(t.nft.address,t.props.verifier,z).then(F=>{console.log("tx.createCredit result: ",F),o()})})},children:[d("Get")," ",u," ",T?"USDT":"TON"]}):a.jsx(v,{c:"red.4",children:d("Not enough funds in the lending pool.")})]}):a.jsx(et,{className:Ht.loader}),e&&s===we.MAKE_BET&&a.jsxs(a.Fragment,{children:[a.jsx(te,{withBorder:!0,children:a.jsxs(te.Section,{children:[a.jsx(v,{fz:"xs",c:"dimmed",ml:"2px",children:(P=e.pawn)==null?void 0:P.collectionName}),a.jsx(v,{fw:500,ml:"2px",children:(R=e.pawn)==null?void 0:R.name}),a.jsxs(fe,{preventGrowOverflow:!1,wrap:"nowrap",children:[a.jsx(Xe,{variant:"filled",radius:"sm",src:(L=e.pawn)==null?void 0:L.previewUrl,size:"xl"}),a.jsxs(W,{children:[e.status===X.WAIT_START_BID&&a.jsxs(a.Fragment,{children:[a.jsx(W.Col,{span:6,children:a.jsxs(v,{size:"xs",children:[" ",d("Loan"),": ",e.size," TON"]})}),a.jsx(W.Col,{span:6,children:a.jsxs(v,{size:"xs",children:[" ",d("Date"),": ",e.end.toLocaleDateString("ru-RU")," "]})})]}),e.status===X.AUCTION_STARTED&&a.jsx(W.Col,{span:12,children:a.jsxs(v,{size:"xs",children:[" ",d("End"),": ",((Q=e.auction)==null?void 0:Q.finish.toLocaleDateString("ru-RU"))+" "+((M=e.auction)==null?void 0:M.finish.toLocaleTimeString("ru-RU"))," "]})}),a.jsx(W.Col,{span:12,children:a.jsxs(v,{size:"xs",children:[d("Minimal bid"),": "," ",a.jsx(G,{value:f,decimalScale:3,suffix:" TON"})]})})]})]})]})},e.address),s===we.MAKE_BET&&a.jsx(Pe,{label:d("Enter the bid amount TON"),description:d("Minimum")+": "+f+" TON",defaultValue:f,allowNegative:!1,value:u,onChange:p,min:f,allowedDecimalSeparators:[".",","]}),e.status>X.CREDIT_CLOSED&&a.jsx(Y,{variant:"filled",fullWidth:!0,mt:"xs",onClick:()=>{r.close(),i.makeBid(e.address,Number(u)).then(z=>{console.log("tx.makeBid result: ",z),o()})},children:d("Make bid")})]})]})}const Ta=65e3;function Na({publicSale:t,user:e,reloadAccount:s,reloadPublicSale:n,accountLoading:r,tx:i,resetStates:o}){const[l]=xt(),{isWebApp:c}=Bs(),d=bt(),{t:u}=be(),[p,f]=y.useState("5"),[x,S]=y.useState(0),[g,b]=y.useState("1"),[A,N]=y.useState("1"),[k,T]=y.useState("1");return y.useEffect(()=>{var P,R;if(e.usdtWallet!==null){let L=Number((P=e.usdtWallet)==null?void 0:P.balance)/Number((R=e.usdtWallet)==null?void 0:R.decimals);S(L)}},[e.usdtAccount]),y.useEffect(()=>{let P=Number(A),R=P-P*Number(p)/100;T(R)},[A,p]),y.useEffect(()=>{if(e.usdtWallet!==void 0){let P=Number(g)/Number(t.price/le);N(P)}},[g]),a.jsxs(Re,{size:"xl",children:[a.jsx(te,{withBorder:!0,radius:"md",className:K.card,children:a.jsxs(te.Section,{className:K.cardSection,children:[e.usdtAccount!==null&&a.jsxs(a.Fragment,{children:[a.jsx(dt,{className:K.icon,size:60,radius:60,color:"teal",children:a.jsx(qs,{style:{width:_(48),height:_(48)}})}),a.jsx(v,{ta:"center",fz:"lg",fw:700,mt:"md",className:K.balance,children:a.jsx(G,{value:x,decimalScale:3,suffix:" USDT"})}),a.jsx(v,{ta:"center",c:"dimmed",fz:"sm",children:u("Balance")}),a.jsx(Pe,{mt:"md",label:u("Amount")+" USDT",placeholder:"1",classNames:K,defaultValue:1,allowNegative:!1,min:1e-9,value:g,onChange:b,decimalSeparator:",",hideControls:!0,rightSection:a.jsx(Y,{size:"compact-md",variant:"outline",onClick:()=>{b(x),console.log("MAX usdtAmount: ",g+"")},children:"max"})}),a.jsxs(v,{ta:"center",size:"lg",mt:"sm",children:[u("You are buying"),": "," ",a.jsx(G,{value:A,fixedDecimalScale:!1,suffix:" BANK"})]}),a.jsx(Y,{fullWidth:!0,mt:"sm",mb:"sm",color:"teal",radius:"xl",style:{flex:1},onClick:()=>{if(e.usdtWallet){const P=Number(g),R=Number(p);console.log("publicSale result: ",R,P),i.publicSale(P,e.usdtWallet.address,R).then(L=>{console.log("tx.publicSale result: ",L),o()})}},children:u("Buy")}),a.jsx(kn,{fullWidth:!0,value:p,onChange:f,data:[{label:"1%",value:"1"},{label:"5%",value:"5"},{label:"10%",value:"10"}]}),a.jsx(v,{ta:"center",c:"dimmed",fz:"sm",children:u("Slippage")}),a.jsx(_e,{className:K.refresh,"aria-label":u("Reload"),variant:"subtle",loading:r,onClick:()=>{s(),n()},children:a.jsx(ut,{})})]}),e.usdtAccount===null&&d!==null&&a.jsx(Re,{mb:"xl",h:100,children:a.jsx(et,{className:K.loader})}),a.jsxs(te.Section,{className:K.footer,children:[a.jsxs("div",{children:[a.jsxs(v,{size:"xs",c:"dimmed",children:[u("Price")," 1 BANK"]}),a.jsx(v,{fw:500,size:"sm",children:a.jsx(G,{value:t.price/le,fixedDecimalScale:!0,decimalScale:2,suffix:" USDT"})})]}),a.jsxs("div",{children:[a.jsx(v,{size:"xs",c:"dimmed",children:u("Min. receive")}),a.jsx(v,{fw:500,size:"sm",children:a.jsx(G,{value:k,decimalScale:2,suffix:" BANK"})})]}),a.jsxs("div",{children:[a.jsx(v,{size:"xs",c:"dimmed",children:u("Left")}),a.jsx(v,{fw:500,size:"sm",children:a.jsx(G,{value:Ta-t.tokensSold/le,decimalScale:0,suffix:" BANK"})})]})]})]})}),!c&&d===null&&a.jsx(fe,{className:K.controls,children:a.jsx(Y,{mt:30,radius:"xl",size:"md",className:K.control,onClick:()=>l.openModal(),children:u("Connect Wallet")})})]})}function Oa({config:t}){var ce;const e=t.allowedUsdtCollectionsProps!==void 0?[...t.allowedCollectionsProps,...t.allowedUsdtCollectionsProps]:t.allowedCollectionsProps,{user:s,reloadAccount:n,accountLoading:r,bankFinance:i,usdtBankFinance:o,publicSale:l,nfts:c,credits:d,auctions:u,collectionNames:p,reloadNftsAndAuctions:f,reloadPublicSale:x}=ga(t),{tx:S,activeState:g,errorState:b,resetStates:A}=Sa(t,n,f,x),{colorScheme:N}=Ni(),[k,T]=xt(),{setColorScheme:P}=Dn(),R=_n("light",{getInitialValueInEffect:!0}),L=()=>{P(R==="light"?"dark":"light")},[,Q]=ta(),{t:M,i18n:z}=be();T({uiPreferences:{theme:N==="dark"?Et.DARK:Et.LIGHT}});const F=bt(),[$,{toggle:J}]=lt(),[se,{toggle:h}]=lt(!0),[m,C]=lt(!1),[j,E]=y.useState(null),[w,B]=y.useState(null),[Z,D]=y.useState(we.GET_CREDIT),[H,ie]=y.useState(!0),[I,q]=y.useState("en");return y.useEffect(()=>{z.changeLanguage(I);let ne="en";I==="ru"&&(ne="ru"),k.uiOptions={language:ne}},[I]),y.useEffect(()=>{let ne=de.initDataUnsafe.start_param;if(ne){let Ae="/"+ne.replace("_","/");Q(Ae)}let ye=de.initDataUnsafe.user;if(ye){let Ae=ye.language_code;Ae&&Ae.substring(0,2)==="ru"&&q("ru")}},[de.initDataUnsafe]),y.useEffect(()=>{localStorage.getItem("ton-connect-ui_wallet-info")===null?(ie(!1),de.MainButton.setText(M("Connect wallet")),de.MainButton.onClick(()=>k.openModal()),de.MainButton.show()):F!==null&&(ie(!1),de.MainButton.hide())},[F]),a.jsxs(a.Fragment,{children:[a.jsxs(ze,{header:{height:60},footer:{height:20},navbar:{width:300,breakpoint:"sm",collapsed:{mobile:!$,desktop:!se}},padding:"xs",children:[a.jsx(ze.Header,{children:a.jsxs(fe,{h:"100%",px:"md",className:De.inner,children:[a.jsx(Zt,{opened:$,onClick:J,hiddenFrom:"sm",size:"sm"}),a.jsx(Zt,{opened:se,onClick:h,visibleFrom:"sm",size:"sm"}),a.jsx(v,{size:"xl",fw:700,variant:"gradient",gradient:t.appNameHeader,className:De.txt,children:M("custom:appName")}),a.jsxs(_e,{onClick:()=>L(),radius:"xl",variant:"outline",size:"xl","aria-label":"Toggle color scheme",children:[a.jsx(Mn,{className:es(De.icon,De.light),stroke:2}),a.jsx(Bn,{className:es(De.icon,De.dark),stroke:2})]})]})}),a.jsxs(ze.Navbar,{p:"md",children:[a.jsx(ue,{label:M("Borrow"),leftSection:a.jsx(zn,{size:"1rem",stroke:1.5}),component:ke,href:"/",onClick:J}),t.publicSale&&a.jsx(ue,{label:t.publicSale.navLinkName,component:ke,leftSection:a.jsx($n,{size:"1rem",stroke:1.5}),href:"/publicsale",onClick:J}),s.holder!==null&&a.jsxs(a.Fragment,{children:[a.jsx(ue,{label:M("Deposit"),component:ke,leftSection:a.jsx(Fn,{size:"1rem",stroke:1.5}),href:"/deposit",onClick:J}),a.jsx(ue,{label:M("Auctions"),leftSection:a.jsx(Vn,{size:"1rem",stroke:1.5}),component:ke,href:"/auction",onClick:J})]}),a.jsxs(ue,{label:M("Info"),leftSection:a.jsx(Hn,{size:"1rem",stroke:1.5}),childrenOffset:28,children:[a.jsx(ue,{label:M("About"),leftSection:a.jsx(Wn,{size:"1rem",stroke:1.5}),component:ke,href:"/about",onClick:J}),a.jsx(ue,{label:M("Collections"),leftSection:a.jsx(Kn,{size:"1rem",stroke:1.5}),component:ke,href:"/collections",onClick:J})]}),a.jsxs(ue,{label:"Language",childrenOffset:28,leftSection:a.jsx(qn,{size:"1rem",stroke:1.5}),children:[a.jsx(ue,{label:"English",onClick:()=>{J(),q("en")}}),a.jsx(ue,{label:"Русский",onClick:()=>{J(),q("ru")}})]}),F?a.jsx(ue,{label:M("Disconnect wallet"),leftSection:a.jsx(Jn,{size:"1rem",stroke:1.5}),description:Fr((ce=s.address)==null?void 0:ce.toString()),onClick:()=>{J(),k.disconnect(),Q("/")}}):a.jsx(ue,{label:M("Connect Wallet"),leftSection:a.jsx(Gn,{size:"1rem",stroke:1.5}),onClick:()=>{J(),k.openModal()}})]}),a.jsxs(ze.Main,{children:[t.isTestnet&&a.jsx(Xn,{fullWidth:!0,variant:"outline",color:"red",mb:"md",children:"TESTNET"}),a.jsxs(ra,{children:[a.jsx(Oe,{path:"/",children:H?a.jsx(ts,{visible:H,zIndex:1e3,overlayProps:{radius:"sm",blur:10},loaderProps:{color:"blue",type:"bars"}}):a.jsx(a.Fragment,{children:F?a.jsx(mi,{nfts:c,credits:d,collectionNames:p,tx:S,isHolder:s.holder!==null||!t.onlyHolderRights.extend,allowed:e,reloadNfts:f,resetStates:A,setNft:E,setTransactionType:D,inputDrawerHandler:C,usdtWallet:s.usdtWallet,bankFinance:i,usdtBankFinance:o}):a.jsx(jt,{data:t.heroPage})})}),a.jsx(Oe,{path:"/deposit",children:F?a.jsx(Ti,{user:s,reloadAccount:n,accountLoading:r,tx:S,resetStates:A,bankFinance:i,usdtBankFinance:o}):a.jsx(jt,{data:t.heroPage})}),a.jsx(Oe,{path:"/auction",children:F?a.jsx(ja,{auctions:u,tx:S,resetStates:A,setCredit:B,setTransactionType:D,inputDrawerHandler:C,usdtWallet:s.usdtWallet}):a.jsx(jt,{data:t.heroPage})}),a.jsx(Oe,{path:"/publicsale",children:l===null?a.jsx(ts,{visible:H,zIndex:1e3,overlayProps:{radius:"sm",blur:10},loaderProps:{color:"blue",type:"bars"}}):a.jsx(Na,{reloadAccount:n,reloadPublicSale:x,accountLoading:r,tx:S,resetStates:A,user:s,publicSale:l})}),a.jsx(Oe,{path:"/about",children:a.jsx(Yn,{children:a.jsx("div",{dangerouslySetInnerHTML:{__html:M("custom:aboutHtml")}})})}),a.jsx(Oe,{path:"/collections",children:a.jsx(Vs,{data:e})}),a.jsx(Oe,{children:ne=>a.jsxs("center",{children:[a.jsx("b",{children:"404:"})," Sorry, this page ",a.jsxs("code",{children:['"/',ne["*"],'"']})," isn't ready yet!"]})})]}),a.jsx(ba,{activeState:g,errorState:b})]}),a.jsx(ze.Footer,{p:2,children:a.jsx(v,{size:"xs",c:"dimmed",children:" © 2024-2025 Krediton "})})]}),a.jsx(Aa,{opened:m,handler:C,offer:j,auction:w,transactionType:Z,tx:S,resetStates:A,bankFinance:i,usdtBankFinance:o})]})}const Pa="config-lb-mainnet.json";function $t(t){"@babel/helpers - typeof";return $t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(t)}function un(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":$t(XMLHttpRequest))==="object"}function Ea(t){return!!t&&typeof t.then=="function"}function Ra(t){return Ea(t)?t:Promise.resolve(t)}const oe=globalThis||void 0||self;var Ft={exports:{}},at={exports:{}},Ns;function La(){return Ns||(Ns=1,function(t,e){var s=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Je<"u"&&Je,n=function(){function i(){this.fetch=!1,this.DOMException=s.DOMException}return i.prototype=s,new i}();(function(i){(function(o){var l=typeof i<"u"&&i||typeof self<"u"&&self||typeof l<"u"&&l,c={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function d(h){return h&&DataView.prototype.isPrototypeOf(h)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(h){return h&&u.indexOf(Object.prototype.toString.call(h))>-1};function f(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(h)||h==="")throw new TypeError('Invalid character in header field name: "'+h+'"');return h.toLowerCase()}function x(h){return typeof h!="string"&&(h=String(h)),h}function S(h){var m={next:function(){var C=h.shift();return{done:C===void 0,value:C}}};return c.iterable&&(m[Symbol.iterator]=function(){return m}),m}function g(h){this.map={},h instanceof g?h.forEach(function(m,C){this.append(C,m)},this):Array.isArray(h)?h.forEach(function(m){this.append(m[0],m[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(m){this.append(m,h[m])},this)}g.prototype.append=function(h,m){h=f(h),m=x(m);var C=this.map[h];this.map[h]=C?C+", "+m:m},g.prototype.delete=function(h){delete this.map[f(h)]},g.prototype.get=function(h){return h=f(h),this.has(h)?this.map[h]:null},g.prototype.has=function(h){return this.map.hasOwnProperty(f(h))},g.prototype.set=function(h,m){this.map[f(h)]=x(m)},g.prototype.forEach=function(h,m){for(var C in this.map)this.map.hasOwnProperty(C)&&h.call(m,this.map[C],C,this)},g.prototype.keys=function(){var h=[];return this.forEach(function(m,C){h.push(C)}),S(h)},g.prototype.values=function(){var h=[];return this.forEach(function(m){h.push(m)}),S(h)},g.prototype.entries=function(){var h=[];return this.forEach(function(m,C){h.push([C,m])}),S(h)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function b(h){if(h.bodyUsed)return Promise.reject(new TypeError("Already read"));h.bodyUsed=!0}function A(h){return new Promise(function(m,C){h.onload=function(){m(h.result)},h.onerror=function(){C(h.error)}})}function N(h){var m=new FileReader,C=A(m);return m.readAsArrayBuffer(h),C}function k(h){var m=new FileReader,C=A(m);return m.readAsText(h),C}function T(h){for(var m=new Uint8Array(h),C=new Array(m.length),j=0;j<m.length;j++)C[j]=String.fromCharCode(m[j]);return C.join("")}function P(h){if(h.slice)return h.slice(0);var m=new Uint8Array(h.byteLength);return m.set(new Uint8Array(h)),m.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(h){this.bodyUsed=this.bodyUsed,this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:c.blob&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:c.formData&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():c.arrayBuffer&&c.blob&&d(h)?(this._bodyArrayBuffer=P(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(h)||p(h))?this._bodyArrayBuffer=P(h):this._bodyText=h=Object.prototype.toString.call(h):this._bodyText="",this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var h=b(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var h=b(this);return h||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(N)}),this.text=function(){var h=b(this);if(h)return h;if(this._bodyBlob)return k(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(z)}),this.json=function(){return this.text().then(JSON.parse)},this}var L=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Q(h){var m=h.toUpperCase();return L.indexOf(m)>-1?m:h}function M(h,m){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');m=m||{};var C=m.body;if(h instanceof M){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,m.headers||(this.headers=new g(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,!C&&h._bodyInit!=null&&(C=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=m.credentials||this.credentials||"same-origin",(m.headers||!this.headers)&&(this.headers=new g(m.headers)),this.method=Q(m.method||this.method||"GET"),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&C)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(C),(this.method==="GET"||this.method==="HEAD")&&(m.cache==="no-store"||m.cache==="no-cache")){var j=/([?&])_=[^&]*/;if(j.test(this.url))this.url=this.url.replace(j,"$1_="+new Date().getTime());else{var E=/\?/;this.url+=(E.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function z(h){var m=new FormData;return h.trim().split("&").forEach(function(C){if(C){var j=C.split("="),E=j.shift().replace(/\+/g," "),w=j.join("=").replace(/\+/g," ");m.append(decodeURIComponent(E),decodeURIComponent(w))}}),m}function F(h){var m=new g,C=h.replace(/\r?\n[\t ]+/g," ");return C.split("\r").map(function(j){return j.indexOf(`
`)===0?j.substr(1,j.length):j}).forEach(function(j){var E=j.split(":"),w=E.shift().trim();if(w){var B=E.join(":").trim();m.append(w,B)}}),m}R.call(M.prototype);function $(h,m){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.ok=this.status>=200&&this.status<300,this.statusText=m.statusText===void 0?"":""+m.statusText,this.headers=new g(m.headers),this.url=m.url||"",this._initBody(h)}R.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},$.error=function(){var h=new $(null,{status:0,statusText:""});return h.type="error",h};var J=[301,302,303,307,308];$.redirect=function(h,m){if(J.indexOf(m)===-1)throw new RangeError("Invalid status code");return new $(null,{status:m,headers:{location:h}})},o.DOMException=l.DOMException;try{new o.DOMException}catch{o.DOMException=function(m,C){this.message=m,this.name=C;var j=Error(m);this.stack=j.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function se(h,m){return new Promise(function(C,j){var E=new M(h,m);if(E.signal&&E.signal.aborted)return j(new o.DOMException("Aborted","AbortError"));var w=new XMLHttpRequest;function B(){w.abort()}w.onload=function(){var D={status:w.status,statusText:w.statusText,headers:F(w.getAllResponseHeaders()||"")};D.url="responseURL"in w?w.responseURL:D.headers.get("X-Request-URL");var H="response"in w?w.response:w.responseText;setTimeout(function(){C(new $(H,D))},0)},w.onerror=function(){setTimeout(function(){j(new TypeError("Network request failed"))},0)},w.ontimeout=function(){setTimeout(function(){j(new TypeError("Network request failed"))},0)},w.onabort=function(){setTimeout(function(){j(new o.DOMException("Aborted","AbortError"))},0)};function Z(D){try{return D===""&&l.location.href?l.location.href:D}catch{return D}}w.open(E.method,Z(E.url),!0),E.credentials==="include"?w.withCredentials=!0:E.credentials==="omit"&&(w.withCredentials=!1),"responseType"in w&&(c.blob?w.responseType="blob":c.arrayBuffer&&E.headers.get("Content-Type")&&E.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(w.responseType="arraybuffer")),m&&typeof m.headers=="object"&&!(m.headers instanceof g)?Object.getOwnPropertyNames(m.headers).forEach(function(D){w.setRequestHeader(D,x(m.headers[D]))}):E.headers.forEach(function(D,H){w.setRequestHeader(H,D)}),E.signal&&(E.signal.addEventListener("abort",B),w.onreadystatechange=function(){w.readyState===4&&E.signal.removeEventListener("abort",B)}),w.send(typeof E._bodyInit>"u"?null:E._bodyInit)})}return se.polyfill=!0,l.fetch||(l.fetch=se,l.Headers=g,l.Request=M,l.Response=$),o.Headers=g,o.Request=M,o.Response=$,o.fetch=se,o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var r=s.fetch?s:n;e=r.fetch,e.default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,t.exports=e}(at,at.exports)),at.exports}(function(t,e){var s;if(typeof fetch=="function"&&(typeof Je<"u"&&Je.fetch?s=Je.fetch:typeof window<"u"&&window.fetch?s=window.fetch:s=fetch),typeof ar<"u"&&typeof window>"u"){var n=s||La();n.default&&(n=n.default),e.default=n,t.exports=e.default}})(Ft,Ft.exports);var fn=Ft.exports;const hn=Qn(fn),Os=or({__proto__:null,default:hn},[fn]);function Ps(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),s.push.apply(s,n)}return s}function Es(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Ps(Object(s),!0).forEach(function(n){Ua(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ps(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Ua(t,e,s){return(e=Ia(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Ia(t){var e=ka(t,"string");return Le(e)=="symbol"?e:e+""}function ka(t,e){if(Le(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e||"default");if(Le(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Le(t){"@babel/helpers - typeof";return Le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(t)}var je;typeof fetch=="function"&&(typeof oe<"u"&&oe.fetch?je=oe.fetch:typeof window<"u"&&window.fetch?je=window.fetch:je=fetch);var Ze;un()&&(typeof oe<"u"&&oe.XMLHttpRequest?Ze=oe.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Ze=window.XMLHttpRequest));var gt;typeof ActiveXObject=="function"&&(typeof oe<"u"&&oe.ActiveXObject?gt=oe.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(gt=window.ActiveXObject));!je&&Os&&!Ze&&!gt&&(je=hn||Os);typeof je!="function"&&(je=void 0);var Vt=function(e,s){if(s&&Le(s)==="object"){var n="";for(var r in s)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(s[r]);if(!n)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+n.slice(1)}return e},Rs=function(e,s,n,r){var i=function(c){if(!c.ok)return n(c.statusText||"Error",{status:c.status});c.text().then(function(d){n(null,{status:c.status,data:d})}).catch(n)};if(r){var o=r(e,s);if(o instanceof Promise){o.then(i).catch(n);return}}typeof fetch=="function"?fetch(e,s).then(i).catch(n):je(e,s).then(i).catch(n)},Ls=!1,Da=function(e,s,n,r){e.queryStringParams&&(s=Vt(s,e.queryStringParams));var i=Es({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof oe<"u"&&typeof oe.process<"u"&&oe.process.versions&&oe.process.versions.node&&(i["User-Agent"]="i18next-http-backend (node/".concat(oe.process.version,"; ").concat(oe.process.platform," ").concat(oe.process.arch,")")),n&&(i["Content-Type"]="application/json");var o=typeof e.requestOptions=="function"?e.requestOptions(n):e.requestOptions,l=Es({method:n?"POST":"GET",body:n?e.stringify(n):void 0,headers:i},Ls?{}:o),c=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{Rs(s,l,r,c)}catch(d){if(!o||Object.keys(o).length===0||!d.message||d.message.indexOf("not implemented")<0)return r(d);try{Object.keys(o).forEach(function(u){delete l[u]}),Rs(s,l,r,c),Ls=!0}catch(u){r(u)}}},_a=function(e,s,n,r){n&&Le(n)==="object"&&(n=Vt("",n).slice(1)),e.queryStringParams&&(s=Vt(s,e.queryStringParams));try{var i;Ze?i=new Ze:i=new gt("MSXML2.XMLHTTP.3.0"),i.open(n?"POST":"GET",s,1),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!e.withCredentials,n&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var o=e.customHeaders;if(o=typeof o=="function"?o():o,o)for(var l in o)i.setRequestHeader(l,o[l]);i.onreadystatechange=function(){i.readyState>3&&r(i.status>=400?i.statusText:null,{status:i.status,data:i.responseText})},i.send(n)}catch(c){console&&console.log(c)}},Ma=function(e,s,n,r){if(typeof n=="function"&&(r=n,n=void 0),r=r||function(){},je&&s.indexOf("file:")!==0)return Da(e,s,n,r);if(un()||typeof ActiveXObject=="function")return _a(e,s,n,r);r(new Error("No fetch and no xhr implementation found!"))};function Be(t){"@babel/helpers - typeof";return Be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(t)}function Us(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),s.push.apply(s,n)}return s}function Ot(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Us(Object(s),!0).forEach(function(n){pn(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Us(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Ba(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Is(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mn(n.key),n)}}function za(t,e,s){return e&&Is(t.prototype,e),s&&Is(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function pn(t,e,s){return(e=mn(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function mn(t){var e=$a(t,"string");return Be(e)=="symbol"?e:e+""}function $a(t,e){if(Be(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e||"default");if(Be(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fa=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(s){return JSON.parse(s)},stringify:JSON.stringify,parsePayload:function(s,n,r){return pn({},n,r||"")},parseLoadPayload:function(s,n){},request:Ma,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},gn=function(){function t(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Ba(this,t),this.services=e,this.options=s,this.allOptions=n,this.type="backend",this.init(e,s,n)}return za(t,[{key:"init",value:function(s){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=s,this.options=Ot(Ot(Ot({},Fa()),this.options||{}),r),this.allOptions=i,this.services&&this.options.reloadInterval){var o=setInterval(function(){return n.reload()},this.options.reloadInterval);Be(o)==="object"&&typeof o.unref=="function"&&o.unref()}}},{key:"readMulti",value:function(s,n,r){this._readAny(s,s,n,n,r)}},{key:"read",value:function(s,n,r){this._readAny([s],s,[n],n,r)}},{key:"_readAny",value:function(s,n,r,i,o){var l=this,c=this.options.loadPath;typeof this.options.loadPath=="function"&&(c=this.options.loadPath(s,r)),c=Ra(c),c.then(function(d){if(!d)return o(null,{});var u=l.services.interpolator.interpolate(d,{lng:s.join("+"),ns:r.join("+")});l.loadUrl(u,o,n,i)})}},{key:"loadUrl",value:function(s,n,r,i){var o=this,l=typeof r=="string"?[r]:r,c=typeof i=="string"?[i]:i,d=this.options.parseLoadPayload(l,c);this.options.request(this.options,s,d,function(u,p){if(p&&(p.status>=500&&p.status<600||!p.status))return n("failed loading "+s+"; status code: "+p.status,!0);if(p&&p.status>=400&&p.status<500)return n("failed loading "+s+"; status code: "+p.status,!1);if(!p&&u&&u.message){var f=u.message.toLowerCase(),x=["failed","fetch","network","load"].find(function(b){return f.indexOf(b)>-1});if(x)return n("failed loading "+s+": "+u.message,!0)}if(u)return n(u,!1);var S,g;try{typeof p.data=="string"?S=o.options.parse(p.data,r,i):S=p.data}catch{g="failed parsing "+s+" to json"}if(g)return n(g,!1);n(null,S)})}},{key:"create",value:function(s,n,r,i,o){var l=this;if(this.options.addPath){typeof s=="string"&&(s=[s]);var c=this.options.parsePayload(n,r,i),d=0,u=[],p=[];s.forEach(function(f){var x=l.options.addPath;typeof l.options.addPath=="function"&&(x=l.options.addPath(f,n));var S=l.services.interpolator.interpolate(x,{lng:f,ns:n});l.options.request(l.options,S,c,function(g,b){d+=1,u.push(g),p.push(b),d===s.length&&typeof o=="function"&&o(u,p)})})}}},{key:"reload",value:function(){var s=this,n=this.services,r=n.backendConnector,i=n.languageUtils,o=n.logger,l=r.language;if(!(l&&l.toLowerCase()==="cimode")){var c=[],d=function(p){var f=i.toResolveHierarchy(p);f.forEach(function(x){c.indexOf(x)<0&&c.push(x)})};d(l),this.allOptions.preload&&this.allOptions.preload.forEach(function(u){return d(u)}),c.forEach(function(u){s.allOptions.ns.forEach(function(p){r.read(u,p,"read",null,null,function(f,x){f&&o.warn("loading namespace ".concat(p," for language ").concat(u," failed"),f),!f&&x&&o.log("loaded namespace ".concat(p," for language ").concat(u),x),r.loaded("".concat(u,"|").concat(p),f,x)})})})}}}])}();gn.type="backend";re.use(gn).use(Tr).init({load:"languageOnly",lng:"en",interpolation:{escapeValue:!1}});const ks={xxs:_("200px"),xs:_("300px"),sm:_("400px"),md:_("500px"),lg:_("600px"),xl:_("1400px"),xxl:_("1600px")},Va=Zn({fontSizes:{xs:_("12px"),sm:_("14px"),md:_("16px"),lg:_("18px"),xl:_("20px"),"2xl":_("24px"),"3xl":_("30px"),"4xl":_("36px"),"5xl":_("48px")},spacing:{"3xs":_("4px"),"2xs":_("8px"),xs:_("10px"),sm:_("12px"),md:_("16px"),lg:_("20px"),xl:_("24px"),"2xl":_("28px"),"3xl":_("32px")},primaryColor:"gray",components:{Container:Re.extend({vars:(t,{size:e,fluid:s})=>({root:{"--container-size":s?"100%":e!==void 0&&e in ks?ks[e]:_(e)}})}),Paper:Ms.extend({defaultProps:{p:"md",shadow:"xl",radius:"md",withBorder:!0}}),Card:te.extend({defaultProps:{p:"xl",shadow:"xl",radius:"var(--mantine-radius-default)",withBorder:!0}}),Select:er.extend({defaultProps:{checkIconPosition:"right"}})},other:{style:"mantine"}});fetch(Pa).then(t=>t.json()).then(t=>{de.ready(),de.expand(),ve.init(t),re.addResourceBundle("en","custom",t.translates.en),re.addResourceBundle("ru","custom",t.translates.ru),t.telegramAnalyticsProps&&de.initDataUnsafe.user!==void 0&&nr.init({token:t.telegramAnalyticsProps.token,appName:t.telegramAnalyticsProps.appName}),Rt.createRoot(document.getElementById("root")).render(a.jsx(tr.StrictMode,{children:a.jsx(sr,{defaultColorScheme:"auto",theme:Va,children:a.jsx(rr,{manifestUrl:t.tonConnectProps.manifestUrl,uiPreferences:{theme:Et.DARK},actionsConfiguration:{twaReturnUrl:t.tonConnectProps.twaReturnUrl},children:a.jsx(Oa,{config:t})})})}))}).catch(t=>console.error("Error loading config:",t));
